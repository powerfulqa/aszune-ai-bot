<?xml version="1.0" encoding="UTF-8"?>
<testsuites name="jest tests" tests="488" failures="150" errors="0" time="41.322">
  <testsuite name="InputValidator - Sanitization" errors="0" failures="6" skipped="0" timestamp="2025-09-24T08:29:03" time="11.072" tests="9">
    <testcase classname="InputValidator - Sanitization validateAndSanitize should validate and sanitize clean input" name="InputValidator - Sanitization validateAndSanitize should validate and sanitize clean input" time="0.29">
    </testcase>
    <testcase classname="InputValidator - Sanitization validateAndSanitize should sanitize HTML content" name="InputValidator - Sanitization validateAndSanitize should sanitize HTML content" time="0.01">
    </testcase>
    <testcase classname="InputValidator - Sanitization validateAndSanitize should reject dangerous content" name="InputValidator - Sanitization validateAndSanitize should reject dangerous content" time="0.037">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: false
Received: true
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-sanitization.test.js:38:28)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="InputValidator - Sanitization validateAndSanitize should handle empty input" name="InputValidator - Sanitization validateAndSanitize should handle empty input" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-sanitization.test.js:45:28)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="InputValidator - Sanitization validateAndSanitize should handle null input" name="InputValidator - Sanitization validateAndSanitize should handle null input" time="0.003">
    </testcase>
    <testcase classname="InputValidator - Sanitization validateAndSanitize should validate different input types" name="InputValidator - Sanitization validateAndSanitize should validate different input types" time="0.003">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: false
Received: true
    at toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-sanitization.test.js:68:30)
    at Array.forEach (&lt;anonymous&gt;)
    at Object.forEach (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-sanitization.test.js:66:17)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="InputValidator - Sanitization validation patterns should have correct validation patterns" name="InputValidator - Sanitization validation patterns should have correct validation patterns" time="0.01">
      <failure>Error: expect(received).toHaveProperty(path)

Expected path: &quot;USER_ID&quot;
Received path: []

Received value: {&quot;ALPHANUMERIC&quot;: /^[a-zA-Z0-9]+$/, &quot;ALPHANUMERIC_WITH_SPACES&quot;: /^[a-zA-Z0-9\s]+$/, &quot;COMMAND_NAME&quot;: /^[a-zA-Z0-9_-]{1,32}$/, &quot;COMMAND_PREFIX&quot;: /^[!/]/, &quot;DISCORD_SNOWFLAKE&quot;: /^\d{17,19}$/, &quot;DISCORD_USER_ID&quot;: /^\d{17,19}$/, &quot;EMAIL_PATTERN&quot;: /^[^\s@]+@[^\s@]+\.[^\s@]+$/, &quot;FILENAME&quot;: /^[a-zA-Z0-9._-]{1,255}$/, &quot;FLOAT&quot;: /^-?\d+\.?\d*$/, &quot;INTEGER&quot;: /^-?\d+$/, &quot;MESSAGE_CONTENT&quot;: /^[\s\S]{1,4000}$/, &quot;PATH&quot;: /^[a-zA-Z0-9._\-/\\]{1,500}$/, &quot;POSITIVE_INTEGER&quot;: /^\d+$/, &quot;SAFE_TEXT&quot;: /^[a-zA-Z0-9\s.,!?@#$%^&amp;*()_+\-=[\]{};&apos;:&quot;\\|,.&lt;&gt;/~`]+$/, &quot;URL_PATTERN&quot;: /^https?:\/\/[^\s/$.?#].[^\s]*$/i}
    at Object.toHaveProperty (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-sanitization.test.js:75:35)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="InputValidator - Sanitization validation patterns should have correct validation limits" name="InputValidator - Sanitization validation patterns should have correct validation limits" time="0.001">
      <failure>Error: expect(received).toHaveProperty(path)

Expected path: &quot;TEXT_MAX_LENGTH&quot;
Received path: []

Received value: {&quot;MAX_COMMAND_LENGTH&quot;: 100, &quot;MAX_FILENAME_LENGTH&quot;: 255, &quot;MAX_HISTORY_LENGTH&quot;: 50, &quot;MAX_MESSAGE_LENGTH&quot;: 4000, &quot;MAX_PASSWORD_LENGTH&quot;: 128, &quot;MAX_PATH_LENGTH&quot;: 500, &quot;MAX_URL_LENGTH&quot;: 2048, &quot;MAX_USERNAME_LENGTH&quot;: 32, &quot;MIN_PASSWORD_LENGTH&quot;: 8}
    at Object.toHaveProperty (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-sanitization.test.js:82:33)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="InputValidator - Sanitization validation patterns should have dangerous patterns defined" name="InputValidator - Sanitization validation patterns should have dangerous patterns defined" time="0.003">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-sanitization.test.js:90:49)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="InputValidator - General Validation" errors="0" failures="8" skipped="0" timestamp="2025-09-24T08:29:04" time="11.268" tests="8">
    <testcase classname="InputValidator - General Validation validateInput should validate text input correctly" name="InputValidator - General Validation validateInput should validate text input correctly" time="0.159">
      <failure>TypeError: InputValidator.validateInput is not a function
    at validateInput (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-validation.test.js:22:39)
    at Array.forEach (&lt;anonymous&gt;)
    at Object.forEach (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-validation.test.js:21:19)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="InputValidator - General Validation validateInput should reject inputs that exceed length limits" name="InputValidator - General Validation validateInput should reject inputs that exceed length limits" time="0.001">
      <failure>TypeError: InputValidator.validateInput is not a function
    at Object.validateInput (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-validation.test.js:30:37)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="InputValidator - General Validation validateInput should reject inputs with dangerous patterns" name="InputValidator - General Validation validateInput should reject inputs with dangerous patterns" time="0.004">
      <failure>TypeError: InputValidator.validateInput is not a function
    at validateInput (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-validation.test.js:45:39)
    at Array.forEach (&lt;anonymous&gt;)
    at Object.forEach (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-validation.test.js:44:23)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="InputValidator - General Validation validateInput should validate email format" name="InputValidator - General Validation validateInput should validate email format" time="0.002">
      <failure>TypeError: InputValidator.validateInput is not a function
    at validateInput (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-validation.test.js:66:39)
    at Array.forEach (&lt;anonymous&gt;)
    at Object.forEach (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-validation.test.js:65:19)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="InputValidator - General Validation validateInput should validate URL format" name="InputValidator - General Validation validateInput should validate URL format" time="0.005">
      <failure>TypeError: InputValidator.validateInput is not a function
    at validateInput (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-validation.test.js:90:39)
    at Array.forEach (&lt;anonymous&gt;)
    at Object.forEach (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-validation.test.js:89:17)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="InputValidator - General Validation sanitizeInput should sanitize HTML content" name="InputValidator - General Validation sanitizeInput should sanitize HTML content" time="0.002">
      <failure>TypeError: InputValidator.sanitizeInput is not a function
    at Object.sanitizeInput (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-validation.test.js:104:37)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="InputValidator - General Validation sanitizeInput should remove dangerous scripts" name="InputValidator - General Validation sanitizeInput should remove dangerous scripts" time="0.001">
      <failure>TypeError: InputValidator.sanitizeInput is not a function
    at Object.sanitizeInput (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-validation.test.js:113:37)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="InputValidator - General Validation sanitizeInput should preserve safe content" name="InputValidator - General Validation sanitizeInput should preserve safe content" time="0.002">
      <failure>TypeError: InputValidator.sanitizeInput is not a function
    at Object.sanitizeInput (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-validation.test.js:123:37)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="InputValidator - User ID" errors="0" failures="2" skipped="0" timestamp="2025-09-24T08:29:04" time="11.38" tests="4">
    <testcase classname="InputValidator - User ID validateUserId should validate correct Discord user IDs" name="InputValidator - User ID validateUserId should validate correct Discord user IDs" time="0.14">
    </testcase>
    <testcase classname="InputValidator - User ID validateUserId should reject invalid user IDs" name="InputValidator - User ID validateUserId should reject invalid user IDs" time="0.03">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: false
Received: true
    at toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-userid.test.js:34:30)
    at Array.forEach (&lt;anonymous&gt;)
    at Object.forEach (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-userid.test.js:32:18)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="InputValidator - User ID validateUserId should accept valid user IDs" name="InputValidator - User ID validateUserId should accept valid user IDs" time="0.022">
    </testcase>
    <testcase classname="InputValidator - User ID validateUserId should handle edge cases" name="InputValidator - User ID validateUserId should handle edge cases" time="0.003">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: false
Received: true
    at toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-userid.test.js:60:30)
    at Array.forEach (&lt;anonymous&gt;)
    at Object.forEach (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\input-validator-userid.test.js:58:17)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Commands - Slash Command Handler" errors="0" failures="16" skipped="0" timestamp="2025-09-24T08:29:04" time="13.185" tests="18">
    <testcase classname="Commands - Slash Command Handler handleSlashCommand should handle /help command" name="Commands - Slash Command Handler handleSlashCommand should handle /help command" time="0.153">
    </testcase>
    <testcase classname="Commands - Slash Command Handler handleSlashCommand should handle /clearhistory command" name="Commands - Slash Command Handler handleSlashCommand should handle /clearhistory command" time="0.051">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;Conversation history cleared!&quot;
Received: &quot;Your conversation history has been cleared.&quot;

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-slash-handler.test.js:60:33)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Slash Command Handler handleSlashCommand should handle /summary command with history" name="Commands - Slash Command Handler handleSlashCommand should handle /summary command with history" time="0.049">
      <failure>Error: expect(jest.fn()).toHaveBeenCalled()

Expected number of calls: &gt;= 1
Received number of calls:    0
    at Object.toHaveBeenCalled (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-slash-handler.test.js:73:33)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Slash Command Handler handleSlashCommand should handle /summary command API error" name="Commands - Slash Command Handler handleSlashCommand should handle /summary command API error" time="0.09">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: StringContaining &quot;error&quot;

Number of calls: 0
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-slash-handler.test.js:85:33)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Slash Command Handler handleSlashCommand should handle /summary command with only assistant messages in history" name="Commands - Slash Command Handler handleSlashCommand should handle /summary command with only assistant messages in history" time="0.004">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;No conversation history to summarize.&quot;
Received: &quot;No conversation history to summarise.&quot;

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-slash-handler.test.js:96:33)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Slash Command Handler handleSlashCommand should handle /summary command with no history" name="Commands - Slash Command Handler handleSlashCommand should handle /summary command with no history" time="0.019">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;No conversation history to summarize.&quot;
Received: &quot;No conversation history to summarise.&quot;

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-slash-handler.test.js:105:33)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Slash Command Handler handleSlashCommand should handle /stats command" name="Commands - Slash Command Handler handleSlashCommand should handle /stats command" time="0.006">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: StringContaining &quot;messages&quot;
Received: &quot;**Your Aszai Bot Stats:**
Messages sent: 10
Summaries requested: 2&quot;

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-slash-handler.test.js:113:33)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Slash Command Handler handleSlashCommand should handle /summarise command with text" name="Commands - Slash Command Handler handleSlashCommand should handle /summarise command with text" time="0.006">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;Hello world&quot;

Number of calls: 0
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-slash-handler.test.js:126:49)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Slash Command Handler handleSlashCommand should handle /summarise command without text" name="Commands - Slash Command Handler handleSlashCommand should handle /summarise command without text" time="0.021">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;Please provide text to summarize.&quot;
Received: &quot;Please provide the text you want summarised. Usage: `!summarise &lt;text&gt;` or `!summerise &lt;text&gt;`&quot;

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-slash-handler.test.js:140:33)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Slash Command Handler handleSlashCommand should handle /summarise command with empty text" name="Commands - Slash Command Handler handleSlashCommand should handle /summarise command with empty text" time="0.004">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;Please provide text to summarize.&quot;
Received: &quot;Please provide the text you want summarised. Usage: `!summarise &lt;text&gt;` or `!summerise &lt;text&gt;`&quot;

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-slash-handler.test.js:153:33)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Slash Command Handler handleSlashCommand should handle /summarise command with invalid text" name="Commands - Slash Command Handler handleSlashCommand should handle /summarise command with invalid text" time="0.005">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: StringContaining &quot;invalid&quot;
Received: &quot;❌ Invalid text input: Message contains potentially dangerous content&quot;

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-slash-handler.test.js:166:33)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Slash Command Handler handleSlashCommand should handle /summarise command API error" name="Commands - Slash Command Handler handleSlashCommand should handle /summarise command API error" time="0.002">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: StringContaining &quot;error&quot;

Number of calls: 0
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-slash-handler.test.js:180:33)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Slash Command Handler handleSlashCommand should handle command execution error when not deferred" name="Commands - Slash Command Handler handleSlashCommand should handle command execution error when not deferred" time="0.005">
      <failure>Error: Reply failed
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-slash-handler.test.js:185:43)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Commands - Slash Command Handler handleSlashCommand should handle unknown command" name="Commands - Slash Command Handler handleSlashCommand should handle unknown command" time="0.007">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;Unknown command.&quot;
Received: {&quot;content&quot;: &quot;Unknown command&quot;, &quot;ephemeral&quot;: true}

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-slash-handler.test.js:196:33)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Slash Command Handler handleSlashCommand should handle command execution error" name="Commands - Slash Command Handler handleSlashCommand should handle command execution error" time="0.003">
      <failure>Error: Reply failed
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-slash-handler.test.js:201:43)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Commands - Slash Command Handler handleSlashCommand should handle slash command with invalid user ID" name="Commands - Slash Command Handler handleSlashCommand should handle slash command with invalid user ID" time="0.003">
    </testcase>
    <testcase classname="Commands - Slash Command Handler handleSlashCommand should handle slash command when already replied" name="Commands - Slash Command Handler handleSlashCommand should handle slash command when already replied" time="0.004">
      <failure>Error: expect(jest.fn()).not.toHaveBeenCalled()

Expected number of calls: 0
Received number of calls: 1

1: &quot;**Aszai Bot Commands:**
`/help` or `!help` - Show this help message
`/clearhistory` or `!clearhistory` - Clear your conversation history
`/summary` or `!summary` - Summarise your current conversation
`/summarise` or `!summarise &lt;text&gt;` or `!summerise &lt;text&gt;` - Summarise provided text
`/stats` or `!stats` - Show your usage stats
Simply chat as normal to talk to the bot!&quot;
    at Object.toHaveBeenCalled (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-slash-handler.test.js:225:37)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Slash Command Handler handleSlashCommand should handle slash command when already deferred and replied" name="Commands - Slash Command Handler handleSlashCommand should handle slash command when already deferred and replied" time="0.002">
      <failure>Error: expect(jest.fn()).not.toHaveBeenCalled()

Expected number of calls: 0
Received number of calls: 1

1: &quot;**Aszai Bot Commands:**
`/help` or `!help` - Show this help message
`/clearhistory` or `!clearhistory` - Clear your conversation history
`/summary` or `!summary` - Summarise your current conversation
`/summarise` or `!summarise &lt;text&gt;` or `!summerise &lt;text&gt;` - Summarise provided text
`/stats` or `!stats` - Show your usage stats
Simply chat as normal to talk to the bot!&quot;
    at Object.toHaveBeenCalled (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-slash-handler.test.js:235:37)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Memory Monitor - Utils" errors="0" failures="5" skipped="0" timestamp="2025-09-24T08:29:03" time="12.666" tests="6">
    <testcase classname="Memory Monitor - Utils should return memory usage information" name="Memory Monitor - Utils should return memory usage information" time="0.151">
      <failure>Error: expect(received).toHaveProperty(path)

Expected path: &quot;heapUsedPercent&quot;
Received path: []

Received value: {&quot;external&quot;: 10485760, &quot;heapTotal&quot;: 83886080, &quot;heapUsed&quot;: 52428800, &quot;isLowMemory&quot;: false, &quot;percentUsed&quot;: 25, &quot;rss&quot;: 104857600}
    at Object.toHaveProperty (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\memory-monitor-utils.test.js:64:19)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Memory Monitor - Utils should calculate memory usage percentage correctly" name="Memory Monitor - Utils should calculate memory usage percentage correctly" time="0.017">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 25
Received: undefined
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\memory-monitor-utils.test.js:71:35)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Memory Monitor - Utils should handle memory usage errors" name="Memory Monitor - Utils should handle memory usage errors" time="0.004">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;message&apos;)
    at MemoryMonitor.message [as getMemoryUsage] (C:\Users\ch\aszune\aszune-ai-bot\src\utils\memory-monitor.js:145:57)
    at Object.getMemoryUsage (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\memory-monitor-utils.test.js:80:33)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Memory Monitor - Utils should return status information" name="Memory Monitor - Utils should return status information" time="0.011">
      <failure>Error: expect(received).toHaveProperty(path)

Expected path: &quot;checkIntervalMs&quot;
Received path: []

Received value: {&quot;criticalMemory&quot;: 262144000, &quot;initialized&quot;: true, &quot;isLowMemory&quot;: true, &quot;lastGcTime&quot;: 1234567890, &quot;memoryLimit&quot;: 209715200, &quot;memoryUsage&quot;: {&quot;external&quot;: 10485760, &quot;heapTotal&quot;: 83886080, &quot;heapUsed&quot;: 52428800, &quot;isLowMemory&quot;: true, &quot;percentUsed&quot;: 25, &quot;rss&quot;: 104857600}}
    at Object.toHaveProperty (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\memory-monitor-utils.test.js:107:20)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Memory Monitor - Utils should handle configuration-based initialization" name="Memory Monitor - Utils should handle configuration-based initialization" time="0.032">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: Any&lt;Function&gt;, 60000

Number of calls: 0
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\memory-monitor-utils.test.js:113:25)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Memory Monitor - Utils should handle memory threshold detection" name="Memory Monitor - Utils should handle memory threshold detection" time="0.683">
    </testcase>
  </testsuite>
  <testsuite name="Pi Detector - Config Generation" errors="0" failures="8" skipped="0" timestamp="2025-09-24T08:29:03" time="11.849" tests="8">
    <testcase classname="Pi Detector - Config Generation generateOptimizedConfig should generate config for Pi 4 with 2GB" name="Pi Detector - Config Generation generateOptimizedConfig should generate config for Pi 4 with 2GB" time="0.163">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\pi-detector-config.test.js:38:35)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Pi Detector - Config Generation generateOptimizedConfig should generate config for Pi 4 with 1GB" name="Pi Detector - Config Generation generateOptimizedConfig should generate config for Pi 4 with 1GB" time="0.006">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\pi-detector-config.test.js:55:35)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Pi Detector - Config Generation generateOptimizedConfig should generate config for Pi 4 with 4GB" name="Pi Detector - Config Generation generateOptimizedConfig should generate config for Pi 4 with 4GB" time="0.005">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 4
Received: 5
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\pi-detector-config.test.js:73:38)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Pi Detector - Config Generation generateOptimizedConfig should generate config for Pi 3" name="Pi Detector - Config Generation generateOptimizedConfig should generate config for Pi 3" time="0.004">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 5
Received: undefined
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\pi-detector-config.test.js:91:34)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Pi Detector - Config Generation generateOptimizedConfig should generate config for Pi 5 with 4GB" name="Pi Detector - Config Generation generateOptimizedConfig should generate config for Pi 5 with 4GB" time="0.005">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 6
Received: 10
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\pi-detector-config.test.js:107:38)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Pi Detector - Config Generation generateOptimizedConfig should generate config for Pi 5 with 8GB" name="Pi Detector - Config Generation generateOptimizedConfig should generate config for Pi 5 with 8GB" time="0.024">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 8
Received: 10
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\pi-detector-config.test.js:124:38)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Pi Detector - Config Generation generateOptimizedConfig should generate config for unknown Pi model" name="Pi Detector - Config Generation generateOptimizedConfig should generate config for unknown Pi model" time="0.003">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 10
Received: undefined
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\pi-detector-config.test.js:142:34)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Pi Detector - Config Generation generateOptimizedConfig should generate config for non-Pi systems" name="Pi Detector - Config Generation generateOptimizedConfig should generate config for non-Pi systems" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: false
Received: true
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\pi-detector-config.test.js:156:30)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Memory Monitor - Checking" errors="0" failures="3" skipped="0" timestamp="2025-09-24T08:29:03" time="13.899" tests="8">
    <testcase classname="Memory Monitor - Checking should trigger garbage collection when memory exceeds limit" name="Memory Monitor - Checking should trigger garbage collection when memory exceeds limit" time="0.89">
    </testcase>
    <testcase classname="Memory Monitor - Checking should clear low memory flag when memory usage drops" name="Memory Monitor - Checking should clear low memory flag when memory usage drops" time="0.005">
    </testcase>
    <testcase classname="Memory Monitor - Checking should handle critical memory threshold" name="Memory Monitor - Checking should handle critical memory threshold" time="0.03">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: Any&lt;Error&gt;, &quot;Memory usage exceeded critical threshold&quot;

Number of calls: 0
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\memory-monitor-checking.test.js:102:22)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Memory Monitor - Checking should handle memory check errors gracefully" name="Memory Monitor - Checking should handle memory check errors gracefully" time="0.015">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;message&apos;)
    at MemoryMonitor.message [as checkMemoryUsage] (C:\Users\ch\aszune\aszune-ai-bot\src\utils\memory-monitor.js:89:57)
    at Object.checkMemoryUsage (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\memory-monitor-checking.test.js:115:19)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Memory Monitor - Checking should force garbage collection when not recently called" name="Memory Monitor - Checking should force garbage collection when not recently called" time="0.531">
    </testcase>
    <testcase classname="Memory Monitor - Checking should not force garbage collection if recently called" name="Memory Monitor - Checking should not force garbage collection if recently called" time="0.006">
    </testcase>
    <testcase classname="Memory Monitor - Checking should handle garbage collection when gc is not available" name="Memory Monitor - Checking should handle garbage collection when gc is not available" time="0.468">
    </testcase>
    <testcase classname="Memory Monitor - Checking should handle garbage collection errors" name="Memory Monitor - Checking should handle garbage collection errors" time="0.003">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;message&apos;)
    at MemoryMonitor.message (C:\Users\ch\aszune\aszune-ai-bot\src\utils\memory-monitor.js:124:63)
    at MemoryMonitor.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-mock\build\index.js:794:25)
    at C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-mock\build\index.js:397:39
    at MemoryMonitor.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-mock\build\index.js:404:13)
    at MemoryMonitor.mockConstructor [as forceGarbageCollection] (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-mock\build\index.js:148:19)
    at Object.forceGarbageCollection (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\memory-monitor-checking.test.js:156:19)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Pi Detector - Initialization" errors="0" failures="5" skipped="0" timestamp="2025-09-24T08:29:04" time="11.605" tests="5">
    <testcase classname="Pi Detector - Initialization initPiOptimizations should initialize and return optimized config" name="Pi Detector - Initialization initPiOptimizations should initialize and return optimized config" time="0.2">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: StringContaining &quot;Pi optimizations&quot;
Received
       1: &quot;Detected pi4 with 4.0GB RAM and 3 cores&quot;
       2: &quot;Applied optimizations: {\&quot;ENABLED\&quot;:true,\&quot;COMPACT_MODE\&quot;:false,\&quot;CACHE_ENABLED\&quot;:true,\&quot;CACHE_MAX_ENTRIES\&quot;:100,\&quot;MAX_CONNECTIONS\&quot;:5,\&quot;DEBOUNCE_MS\&quot;:100,\&quot;LOW_CPU_MODE\&quot;:false,\&quot;STREAM_RESPONSES\&quot;:true,\&quot;REACTION_LIMIT\&quot;:3,\&quot;MEMORY_LIMITS\&quot;:{\&quot;RAM_THRESHOLD_MB\&quot;:1000,\&quot;RAM_CRITICAL_MB\&quot;:1500}}&quot;

Number of calls: 2
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\pi-detector-init.test.js:46:27)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Pi Detector - Initialization initPiOptimizations should respect environment variable overrides" name="Pi Detector - Initialization initPiOptimizations should respect environment variable overrides" time="0.043">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: false
Received: true
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\pi-detector-init.test.js:61:30)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Pi Detector - Initialization initPiOptimizations should handle errors and return safe defaults" name="Pi Detector - Initialization initPiOptimizations should handle errors and return safe defaults" time="0.011">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: false
Received: true
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\pi-detector-init.test.js:78:30)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Pi Detector - Initialization initPiOptimizations should not initialize Pi optimizations when disabled by environment variable" name="Pi Detector - Initialization initPiOptimizations should not initialize Pi optimizations when disabled by environment variable" time="0.009">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: false
Received: true
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\pi-detector-init.test.js:87:30)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Pi Detector - Initialization initPiOptimizations should use environment-provided values when initialization fails" name="Pi Detector - Initialization initPiOptimizations should use environment-provided values when initialization fails" time="0.035">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: true
Received: false
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\pi-detector-init.test.js:105:35)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Pi Detector - Detection" errors="0" failures="2" skipped="0" timestamp="2025-09-24T08:29:03" time="12.198" tests="8">
    <testcase classname="Pi Detector - Detection detectPiModel should detect Raspberry Pi 4" name="Pi Detector - Detection detectPiModel should detect Raspberry Pi 4" time="0.165">
    </testcase>
    <testcase classname="Pi Detector - Detection detectPiModel should detect Raspberry Pi 3" name="Pi Detector - Detection detectPiModel should detect Raspberry Pi 3" time="0.003">
    </testcase>
    <testcase classname="Pi Detector - Detection detectPiModel should detect Raspberry Pi 5" name="Pi Detector - Detection detectPiModel should detect Raspberry Pi 5" time="0.003">
    </testcase>
    <testcase classname="Pi Detector - Detection detectPiModel should handle CPU frequency detection" name="Pi Detector - Detection detectPiModel should handle CPU frequency detection" time="0.02">
      <failure>Error: expect(received).toBeDefined()

Received: undefined
    at Object.toBeDefined (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\pi-detector-detection.test.js:88:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Pi Detector - Detection detectPiModel should handle temperature reading failure" name="Pi Detector - Detection detectPiModel should handle temperature reading failure" time="0.005">
    </testcase>
    <testcase classname="Pi Detector - Detection detectPiModel should handle non-Pi systems" name="Pi Detector - Detection detectPiModel should handle non-Pi systems" time="0.004">
    </testcase>
    <testcase classname="Pi Detector - Detection detectPiModel should handle non-Linux systems" name="Pi Detector - Detection detectPiModel should handle non-Linux systems" time="0.032">
    </testcase>
    <testcase classname="Pi Detector - Detection detectPiModel should handle errors gracefully" name="Pi Detector - Detection detectPiModel should handle errors gracefully" time="0.014">
      <failure>Error: expect(jest.fn()).toHaveBeenCalled()

Expected number of calls: &gt;= 1
Received number of calls:    0
    at Object.toHaveBeenCalled (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\pi-detector-detection.test.js:129:28)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Commands - Text Command Handler" errors="0" failures="14" skipped="0" timestamp="2025-09-24T08:29:03" time="13.145" tests="18">
    <testcase classname="Commands - Text Command Handler handleTextCommand should handle !help command" name="Commands - Text Command Handler handleTextCommand should handle !help command" time="0.279">
    </testcase>
    <testcase classname="Commands - Text Command Handler handleTextCommand should handle !clearhistory command" name="Commands - Text Command Handler handleTextCommand should handle !clearhistory command" time="0.047">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;Conversation history cleared!&quot;
Received: &quot;Your conversation history has been cleared.&quot;

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-text-handler.test.js:60:29)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Text Command Handler handleTextCommand should handle !summary command with history" name="Commands - Text Command Handler handleTextCommand should handle !summary command with history" time="0.046">
    </testcase>
    <testcase classname="Commands - Text Command Handler handleTextCommand should handle !summary command with no history" name="Commands - Text Command Handler handleTextCommand should handle !summary command with no history" time="0.003">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;No conversation history to summarize.&quot;
Received: &quot;No conversation history to summarise.&quot;

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-text-handler.test.js:82:29)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Text Command Handler handleTextCommand should handle !summary command with only assistant messages in history" name="Commands - Text Command Handler handleTextCommand should handle !summary command with only assistant messages in history" time="0.002">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;No conversation history to summarize.&quot;
Received: &quot;No conversation history to summarise.&quot;

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-text-handler.test.js:93:29)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Text Command Handler handleTextCommand should handle errors during text command execution" name="Commands - Text Command Handler handleTextCommand should handle errors during text command execution" time="0.093">
      <failure>Error: Reply failed
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-text-handler.test.js:98:39)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Commands - Text Command Handler handleTextCommand should handle !summary command API error" name="Commands - Text Command Handler handleTextCommand should handle !summary command API error" time="0.033">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: StringContaining &quot;error&quot;
Received: &quot;The service is temporarily unavailable. Please try again later.&quot;

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-text-handler.test.js:114:29)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Text Command Handler handleTextCommand should handle !stats command" name="Commands - Text Command Handler handleTextCommand should handle !stats command" time="0.005">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: StringContaining &quot;messages&quot;
Received: &quot;**Your Aszai Bot Stats:**
Messages sent: 10
Summaries requested: 2&quot;

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-text-handler.test.js:122:29)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Text Command Handler handleTextCommand should handle !summarise command with text" name="Commands - Text Command Handler handleTextCommand should handle !summarise command with text" time="0.014">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;Hello world&quot;

Number of calls: 0
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-text-handler.test.js:129:49)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Text Command Handler handleTextCommand should handle !summerise command with text (alternative spelling)" name="Commands - Text Command Handler handleTextCommand should handle !summerise command with text (alternative spelling)" time="0.017">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;Hello world&quot;

Number of calls: 0
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-text-handler.test.js:137:49)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Text Command Handler handleTextCommand should handle !summarise command without text" name="Commands - Text Command Handler handleTextCommand should handle !summarise command without text" time="0.004">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;Please provide text to summarize.&quot;
Received: &quot;Please provide the text you want summarised. Usage: `!summarise &lt;text&gt;` or `!summerise &lt;text&gt;`&quot;

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-text-handler.test.js:145:29)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Text Command Handler handleTextCommand should handle !summarise command with empty text" name="Commands - Text Command Handler handleTextCommand should handle !summarise command with empty text" time="0.004">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;Please provide text to summarize.&quot;
Received: &quot;Please provide the text you want summarised. Usage: `!summarise &lt;text&gt;` or `!summerise &lt;text&gt;`&quot;

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-text-handler.test.js:152:29)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Text Command Handler handleTextCommand should handle !summarise command with invalid text" name="Commands - Text Command Handler handleTextCommand should handle !summarise command with invalid text" time="0.004">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: StringContaining &quot;invalid&quot;
Received: &quot;❌ Invalid text input: Message contains potentially dangerous content&quot;

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-text-handler.test.js:159:29)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Text Command Handler handleTextCommand should handle !summarise command API error" name="Commands - Text Command Handler handleTextCommand should handle !summarise command API error" time="0.005">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: StringContaining &quot;error&quot;
Received: {&quot;embeds&quot;: [{&quot;color&quot;: 39423, &quot;description&quot;: undefined, &quot;footer&quot;: {&quot;text&quot;: &quot;Aszai Bot&quot;}, &quot;title&quot;: &quot;Text Summary&quot;}]}

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-text-handler.test.js:168:29)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Text Command Handler handleTextCommand should handle text command with invalid user ID" name="Commands - Text Command Handler handleTextCommand should handle text command with invalid user ID" time="0.005">
    </testcase>
    <testcase classname="Commands - Text Command Handler handleTextCommand should handle text command parsing for summarise" name="Commands - Text Command Handler handleTextCommand should handle text command parsing for summarise" time="0.018">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;This is a test&quot;

Number of calls: 0
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-text-handler.test.js:182:49)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Text Command Handler handleTextCommand should handle text command parsing for summerise (alternative spelling)" name="Commands - Text Command Handler handleTextCommand should handle text command parsing for summerise (alternative spelling)" time="0.008">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;This is a test&quot;

Number of calls: 0
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\commands-text-handler.test.js:189:49)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Commands - Text Command Handler handleTextCommand should return null for unknown command" name="Commands - Text Command Handler handleTextCommand should return null for unknown command" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="Chat Service - Advanced" errors="0" failures="7" skipped="0" timestamp="2025-09-24T08:29:17" time="2.84" tests="11">
    <testcase classname="Chat Service - Advanced should handle AI response generation errors" name="Chat Service - Advanced should handle AI response generation errors" time="0.618">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: StringContaining &quot;error&quot;
Received: &quot;The service is temporarily unavailable. Please try again later.&quot;

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\chat-service-advanced.test.js:60:27)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Chat Service - Advanced should add emojis to responses when not in low CPU mode" name="Chat Service - Advanced should add emojis to responses when not in low CPU mode" time="0.034">
    </testcase>
    <testcase classname="Chat Service - Advanced should handle long responses with chunking" name="Chat Service - Advanced should handle long responses with chunking" time="0.031">
    </testcase>
    <testcase classname="Chat Service - Advanced should handle special characters in messages" name="Chat Service - Advanced should handle special characters in messages" time="0.003">
      <failure>TypeError: chatService.handleChatMessage is not a function
    at Object.handleChatMessage (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\chat-service-advanced.test.js:84:23)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Chat Service - Advanced should handle multiline messages" name="Chat Service - Advanced should handle multiline messages" time="0.006">
      <failure>TypeError: chatService.handleChatMessage is not a function
    at Object.handleChatMessage (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\chat-service-advanced.test.js:92:23)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Chat Service - Advanced should handle messages with URLs" name="Chat Service - Advanced should handle messages with URLs" time="0.004">
      <failure>TypeError: chatService.handleChatMessage is not a function
    at Object.handleChatMessage (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\chat-service-advanced.test.js:100:23)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Chat Service - Advanced should handle messages with emojis" name="Chat Service - Advanced should handle messages with emojis" time="0.005">
      <failure>TypeError: chatService.handleChatMessage is not a function
    at Object.handleChatMessage (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\chat-service-advanced.test.js:108:23)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Chat Service - Advanced should handle empty conversation history" name="Chat Service - Advanced should handle empty conversation history" time="0.013">
    </testcase>
    <testcase classname="Chat Service - Advanced should handle conversation history with multiple messages" name="Chat Service - Advanced should handle conversation history with multiple messages" time="0.022">
    </testcase>
    <testcase classname="Chat Service - Advanced should handle network timeouts gracefully" name="Chat Service - Advanced should handle network timeouts gracefully" time="0.046">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: StringContaining &quot;timeout&quot;
Received: &quot;An unexpected error occurred. Please try again later.&quot;

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\chat-service-advanced.test.js:142:27)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="Chat Service - Advanced should handle rate limit errors from API" name="Chat Service - Advanced should handle rate limit errors from API" time="0.07">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: StringContaining &quot;rate limit&quot;
Received: &quot;An unexpected error occurred. Please try again later.&quot;

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\chat-service-advanced.test.js:151:27)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="URL Formatter - Social Media" errors="0" failures="6" skipped="0" timestamp="2025-09-24T08:29:18" time="0.739" tests="16">
    <testcase classname="URL Formatter - Social Media formatSocialMediaLinks should format Reddit URLs" name="URL Formatter - Social Media formatSocialMediaLinks should format Reddit URLs" time="0.002">
    </testcase>
    <testcase classname="URL Formatter - Social Media formatSocialMediaLinks should format Reddit subreddit references" name="URL Formatter - Social Media formatSocialMediaLinks should format Reddit subreddit references" time="0.004">
    </testcase>
    <testcase classname="URL Formatter - Social Media formatSocialMediaLinks should format Imgur URLs" name="URL Formatter - Social Media formatSocialMediaLinks should format Imgur URLs" time="0.001">
    </testcase>
    <testcase classname="URL Formatter - Social Media formatSocialMediaLinks should format GitHub URLs" name="URL Formatter - Social Media formatSocialMediaLinks should format GitHub URLs" time="0">
    </testcase>
    <testcase classname="URL Formatter - Social Media formatSocialMediaLinks should format Twitter URLs" name="URL Formatter - Social Media formatSocialMediaLinks should format Twitter URLs" time="0.001">
    </testcase>
    <testcase classname="URL Formatter - Social Media formatSocialMediaLinks should format X.com URLs" name="URL Formatter - Social Media formatSocialMediaLinks should format X.com URLs" time="0.002">
    </testcase>
    <testcase classname="URL Formatter - Social Media formatSocialMediaLinks should handle text without URLs" name="URL Formatter - Social Media formatSocialMediaLinks should handle text without URLs" time="0.004">
    </testcase>
    <testcase classname="URL Formatter - Social Media formatSocialMediaLinks should handle multiple URLs in one text" name="URL Formatter - Social Media formatSocialMediaLinks should handle multiple URLs in one text" time="0.002">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;(https://github.com/user/repo)&quot;
Received string:    &quot;Check (https://reddit.com/r/programming) and (https://github.com/use[Reddit:) r/repo](https://reddit.com/r/repo)&quot;
    at Object.toContain (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\url-formatter-social.test.js:55:22)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="URL Formatter - Social Media formatSocialMediaLinks should handle URLs with query parameters" name="URL Formatter - Social Media formatSocialMediaLinks should handle URLs with query parameters" time="0.001">
    </testcase>
    <testcase classname="URL Formatter - Social Media formatSocialMediaLinks should handle URLs with fragments" name="URL Formatter - Social Media formatSocialMediaLinks should handle URLs with fragments" time="0.001">
    </testcase>
    <testcase classname="URL Formatter - Social Media formatSocialMediaLinks should handle URLs with www prefix" name="URL Formatter - Social Media formatSocialMediaLinks should handle URLs with www prefix" time="0.001">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;(https://www.reddit.com/r/programming)&quot;
Received string:    &quot;Visit www.(https://reddit.com/r/programming)&quot;
    at Object.toContain (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\url-formatter-social.test.js:73:22)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="URL Formatter - Social Media formatSocialMediaLinks should handle URLs with https prefix" name="URL Formatter - Social Media formatSocialMediaLinks should handle URLs with https prefix" time="0.001">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;(https://reddit.com/r/programming)&quot;
Received string:    &quot;Check https://reddit.com/r/programming&quot;
    at Object.toContain (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\url-formatter-social.test.js:79:22)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="URL Formatter - Social Media formatSocialMediaLinks should handle URLs with http prefix" name="URL Formatter - Social Media formatSocialMediaLinks should handle URLs with http prefix" time="0.001">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;(https://reddit.com/r/programming)&quot;
Received string:    &quot;Check http://reddit.com/r/programming&quot;
    at Object.toContain (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\url-formatter-social.test.js:85:22)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="URL Formatter - Social Media formatSocialMediaLinks should handle mixed case URLs" name="URL Formatter - Social Media formatSocialMediaLinks should handle mixed case URLs" time="0.001">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;(https://reddit.com/r/programming)&quot;
Received string:    &quot;Check REDDIT.COM/R/PROGRAMMING&quot;
    at Object.toContain (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\url-formatter-social.test.js:91:22)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="URL Formatter - Social Media formatSocialMediaLinks should handle URLs at end of sentence" name="URL Formatter - Social Media formatSocialMediaLinks should handle URLs at end of sentence" time="0.001">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;(https://reddit.com/r/programming)&quot;
Received string:    &quot;Check out (https://reddit.com/r/programming.)&quot;
    at Object.toContain (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\url-formatter-social.test.js:97:22)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="URL Formatter - Social Media formatSocialMediaLinks should handle URLs at beginning of sentence" name="URL Formatter - Social Media formatSocialMediaLinks should handle URLs at beginning of sentence" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Message Chunker - Advanced" errors="0" failures="3" skipped="0" timestamp="2025-09-24T08:29:18" time="0.871" tests="10">
    <testcase classname="Message Chunker - Advanced should not cut off sentences at chunk boundaries" name="Message Chunker - Advanced should not cut off sentences at chunk boundaries" time="0.005">
    </testcase>
    <testcase classname="Message Chunker - Advanced should handle messages with special characters" name="Message Chunker - Advanced should handle messages with special characters" time="0.003">
    </testcase>
    <testcase classname="Message Chunker - Advanced should handle messages with unicode characters" name="Message Chunker - Advanced should handle messages with unicode characters" time="0.002">
    </testcase>
    <testcase classname="Message Chunker - Advanced should handle messages with URLs" name="Message Chunker - Advanced should handle messages with URLs" time="0.006">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;https://example.com&quot;
Received string:    &quot;Check out https://example.......com for more information&quot;
    at Object.toContain (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\message-chunker-advanced.test.js:46:22)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Message Chunker - Advanced should handle messages with markdown formatting" name="Message Chunker - Advanced should handle messages with markdown formatting" time="0.005">
    </testcase>
    <testcase classname="Message Chunker - Advanced should handle messages with line breaks" name="Message Chunker - Advanced should handle messages with line breaks" time="0.019">
    </testcase>
    <testcase classname="Message Chunker - Advanced should handle very long single word" name="Message Chunker - Advanced should handle very long single word" time="0.002">
      <failure>Error: expect(received).toBeLessThanOrEqual(expected)

Expected: &lt;= 110
Received:    919
    at toBeLessThanOrEqual (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\message-chunker-advanced.test.js:77:28)
    at Array.forEach (&lt;anonymous&gt;)
    at Object.forEach (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\message-chunker-advanced.test.js:76:12)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Message Chunker - Advanced should handle mixed content types" name="Message Chunker - Advanced should handle mixed content types" time="0.003">
    </testcase>
    <testcase classname="Message Chunker - Advanced should maintain chunk order" name="Message Chunker - Advanced should maintain chunk order" time="0.009">
    </testcase>
    <testcase classname="Message Chunker - Advanced should handle edge case with exact chunk size" name="Message Chunker - Advanced should handle edge case with exact chunk size" time="0.005">
      <failure>Error: expect(received).toBeGreaterThan(expected)

Expected: &gt; 1
Received:   1
    at Object.toBeGreaterThan (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\message-chunker-advanced.test.js:109:27)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Logger - Advanced" errors="0" failures="4" skipped="0" timestamp="2025-09-24T08:29:18" time="1.285" tests="13">
    <testcase classname="Logger - Advanced respects log level filtering" name="Logger - Advanced respects log level filtering" time="0.028">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledTimes(expected)

Expected number of calls: 2
Received number of calls: 1
    at Object.toHaveBeenCalledTimes (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\logger-advanced.test.js:34:25)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Logger - Advanced handles log level ERROR only" name="Logger - Advanced handles log level ERROR only" time="0.004">
    </testcase>
    <testcase classname="Logger - Advanced handles log level WARN and above" name="Logger - Advanced handles log level WARN and above" time="0.012">
    </testcase>
    <testcase classname="Logger - Advanced handles log level INFO and above" name="Logger - Advanced handles log level INFO and above" time="0.005">
    </testcase>
    <testcase classname="Logger - Advanced handles log level DEBUG (all messages)" name="Logger - Advanced handles log level DEBUG (all messages)" time="0.015">
    </testcase>
    <testcase classname="Logger - Advanced handles invalid log level gracefully" name="Logger - Advanced handles invalid log level gracefully" time="0.018">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledTimes(expected)

Expected number of calls: 2
Received number of calls: 1
    at Object.toHaveBeenCalledTimes (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\logger-advanced.test.js:100:25)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Logger - Advanced handles complex data objects" name="Logger - Advanced handles complex data objects" time="0.014">
    </testcase>
    <testcase classname="Logger - Advanced handles circular references in data" name="Logger - Advanced handles circular references in data" time="0.013">
      <failure>TypeError: Converting circular structure to JSON
    --&gt; starting at object with constructor &apos;Object&apos;
    --- property &apos;self&apos; closes the circle
    at JSON.stringify (&lt;anonymous&gt;)
    at Logger.stringify [as debug] (C:\Users\ch\aszune\aszune-ai-bot\src\utils\logger.js:127:40)
    at Object.debug (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\logger-advanced.test.js:130:12)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Logger - Advanced handles very long messages" name="Logger - Advanced handles very long messages" time="0.006">
    </testcase>
    <testcase classname="Logger - Advanced handles messages with newlines" name="Logger - Advanced handles messages with newlines" time="0.004">
    </testcase>
    <testcase classname="Logger - Advanced handles messages with tabs" name="Logger - Advanced handles messages with tabs" time="0.002">
    </testcase>
    <testcase classname="Logger - Advanced handles messages with carriage returns" name="Logger - Advanced handles messages with carriage returns" time="0.002">
    </testcase>
    <testcase classname="Logger - Advanced handles multiple data arguments" name="Logger - Advanced handles multiple data arguments" time="0.009">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledTimes(expected)

Expected number of calls: 4
Received number of calls: 2
    at Object.toHaveBeenCalledTimes (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\logger-advanced.test.js:170:25)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Perplexity Service - Advanced" errors="0" failures="4" skipped="0" timestamp="2025-09-24T08:29:17" time="3.554" tests="12">
    <testcase classname="Perplexity Service - Advanced sendChatRequest advanced scenarios handles rate limiting errors" name="Perplexity Service - Advanced sendChatRequest advanced scenarios handles rate limiting errors" time="1.304">
    </testcase>
    <testcase classname="Perplexity Service - Advanced sendChatRequest advanced scenarios handles server errors" name="Perplexity Service - Advanced sendChatRequest advanced scenarios handles server errors" time="0.06">
    </testcase>
    <testcase classname="Perplexity Service - Advanced sendChatRequest advanced scenarios handles unauthorized errors" name="Perplexity Service - Advanced sendChatRequest advanced scenarios handles unauthorized errors" time="0.069">
    </testcase>
    <testcase classname="Perplexity Service - Advanced sendChatRequest advanced scenarios handles forbidden errors" name="Perplexity Service - Advanced sendChatRequest advanced scenarios handles forbidden errors" time="0.093">
    </testcase>
    <testcase classname="Perplexity Service - Advanced sendChatRequest advanced scenarios handles timeout errors" name="Perplexity Service - Advanced sendChatRequest advanced scenarios handles timeout errors" time="0.135">
    </testcase>
    <testcase classname="Perplexity Service - Advanced sendChatRequest advanced scenarios handles malformed response" name="Perplexity Service - Advanced sendChatRequest advanced scenarios handles malformed response" time="0.011">
      <failure>Error: expect(received).rejects.toThrow()

Received promise resolved instead of rejected
Resolved to value: {&quot;invalid&quot;: &quot;response&quot;}
    at expect (C:\Users\ch\aszune\aszune-ai-bot\node_modules\expect\build\index.js:113:15)
    at Object.expect (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\perplexity-service-advanced.test.js:78:13)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Perplexity Service - Advanced sendChatRequest advanced scenarios handles empty response" name="Perplexity Service - Advanced sendChatRequest advanced scenarios handles empty response" time="0.01">
      <failure>Error: expect(received).rejects.toThrow()

Received promise resolved instead of rejected
Resolved to value: {}
    at expect (C:\Users\ch\aszune\aszune-ai-bot\node_modules\expect\build\index.js:113:15)
    at Object.expect (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\perplexity-service-advanced.test.js:88:13)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Perplexity Service - Advanced sendChatRequest advanced scenarios handles response with no choices" name="Perplexity Service - Advanced sendChatRequest advanced scenarios handles response with no choices" time="0.005">
      <failure>Error: expect(received).rejects.toThrow()

Received promise resolved instead of rejected
Resolved to value: {&quot;choices&quot;: []}
    at expect (C:\Users\ch\aszune\aszune-ai-bot\node_modules\expect\build\index.js:113:15)
    at Object.expect (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\perplexity-service-advanced.test.js:98:13)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Perplexity Service - Advanced sendChatRequest advanced scenarios handles response with invalid choice structure" name="Perplexity Service - Advanced sendChatRequest advanced scenarios handles response with invalid choice structure" time="0.01">
      <failure>Error: expect(received).rejects.toThrow()

Received promise resolved instead of rejected
Resolved to value: {&quot;choices&quot;: [{&quot;invalid&quot;: &quot;choice&quot;}]}
    at expect (C:\Users\ch\aszune\aszune-ai-bot\node_modules\expect\build\index.js:113:15)
    at Object.expect (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\perplexity-service-advanced.test.js:108:13)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Perplexity Service - Advanced sendChatRequest advanced scenarios handles very long messages" name="Perplexity Service - Advanced sendChatRequest advanced scenarios handles very long messages" time="0.004">
    </testcase>
    <testcase classname="Perplexity Service - Advanced sendChatRequest advanced scenarios handles messages with special characters" name="Perplexity Service - Advanced sendChatRequest advanced scenarios handles messages with special characters" time="0.002">
    </testcase>
    <testcase classname="Perplexity Service - Advanced sendChatRequest advanced scenarios handles messages with unicode characters" name="Perplexity Service - Advanced sendChatRequest advanced scenarios handles messages with unicode characters" time="0.006">
    </testcase>
  </testsuite>
  <testsuite name="PerplexitySecure Service - Core" errors="0" failures="7" skipped="0" timestamp="2025-09-24T08:29:03" time="17.513" tests="11">
    <testcase classname="PerplexitySecure Service - Core generateChatResponse should handle rate limiting with 429 status code" name="PerplexitySecure Service - Core generateChatResponse should handle rate limiting with 429 status code" time="1.468">
      <failure>Error: API request failed with status 429: {&quot;error&quot;:&quot;Rate limit exceeded&quot;}
    at Function.createError (C:\Users\ch\aszune\aszune-ai-bot\src\utils\error-handler.js:254:19)
    at PerplexityService.createError [as _handleErrorResponse] (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:387:32)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="PerplexitySecure Service - Core generateChatResponse should handle API errors gracefully" name="PerplexitySecure Service - Core generateChatResponse should handle API errors gracefully" time="0.394">
      <failure>Error: API request failed with status 500: {&quot;error&quot;:&quot;API Error&quot;}
    at Function.createError (C:\Users\ch\aszune\aszune-ai-bot\src\utils\error-handler.js:254:19)
    at PerplexityService.createError [as _handleErrorResponse] (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:387:32)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="PerplexitySecure Service - Core generateChatResponse should handle network errors" name="PerplexitySecure Service - Core generateChatResponse should handle network errors" time="0.316">
      <failure>Error: Network error
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\services\perplexity-secure-core.test.js:67:37)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="PerplexitySecure Service - Core generateChatResponse should handle invalid response format" name="PerplexitySecure Service - Core generateChatResponse should handle invalid response format" time="1.657">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;unexpected&quot;
Received string:    &quot;Sorry, no response choices were returned.&quot;
    at Object.toContain (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\services\perplexity-secure-core.test.js:82:22)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="PerplexitySecure Service - Core generateChatResponse should handle empty response" name="PerplexitySecure Service - Core generateChatResponse should handle empty response" time="0.096">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;empty&quot;
Received string:    &quot;Sorry, no response choices were returned.&quot;
    at Object.toContain (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\services\perplexity-secure-core.test.js:92:22)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="PerplexitySecure Service - Core generateChatResponse should handle successful response" name="PerplexitySecure Service - Core generateChatResponse should handle successful response" time="0.073">
    </testcase>
    <testcase classname="PerplexitySecure Service - Core generateChatResponse should handle backward compatibility with boolean caching parameter" name="PerplexitySecure Service - Core generateChatResponse should handle backward compatibility with boolean caching parameter" time="0.001">
    </testcase>
    <testcase classname="PerplexitySecure Service - Core generateChatResponse should handle object options parameter" name="PerplexitySecure Service - Core generateChatResponse should handle object options parameter" time="0.002">
    </testcase>
    <testcase classname="PerplexitySecure Service - Core generateSummary should generate summary for conversation history" name="PerplexitySecure Service - Core generateSummary should generate summary for conversation history" time="0.004">
    </testcase>
    <testcase classname="PerplexitySecure Service - Core generateSummary should handle empty conversation history" name="PerplexitySecure Service - Core generateSummary should handle empty conversation history" time="0.05">
      <failure>Error: Invalid response: response is null or undefined
    at Function.createError (C:\Users\ch\aszune\aszune-ai-bot\src\utils\error-handler.js:254:19)
    at PerplexityService.createError [as _handleApiResponse] (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:334:26)
    at PerplexityService._handleApiResponse [as sendChatRequest] (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:460:25)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at PerplexityService.generateTextSummary (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:740:22)
    at PerplexityService.generateSummary (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:716:14)
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\services\perplexity-secure-core.test.js:174:22)</failure>
    </testcase>
    <testcase classname="PerplexitySecure Service - Core generateSummary should handle summary generation errors" name="PerplexitySecure Service - Core generateSummary should handle summary generation errors" time="1.481">
      <failure>Error: Summary generation failed
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\services\perplexity-secure-core.test.js:179:37)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="URL Formatter - YouTube" errors="0" failures="3" skipped="0" timestamp="2025-09-24T08:29:03" time="17.422" tests="15">
    <testcase classname="URL Formatter - YouTube formatYouTubeLinks should format YouTube URLs" name="URL Formatter - YouTube formatYouTubeLinks should format YouTube URLs" time="0.134">
    </testcase>
    <testcase classname="URL Formatter - YouTube formatYouTubeLinks should format YouTube short URLs" name="URL Formatter - YouTube formatYouTubeLinks should format YouTube short URLs" time="0.001">
    </testcase>
    <testcase classname="URL Formatter - YouTube formatYouTubeLinks should handle text without YouTube URLs" name="URL Formatter - YouTube formatYouTubeLinks should handle text without YouTube URLs" time="0.002">
    </testcase>
    <testcase classname="URL Formatter - YouTube formatYouTubeLinks should handle multiple YouTube URLs" name="URL Formatter - YouTube formatYouTubeLinks should handle multiple YouTube URLs" time="0.003">
    </testcase>
    <testcase classname="URL Formatter - YouTube fixLinkFormatting should fix malformed markdown links" name="URL Formatter - YouTube fixLinkFormatting should fix malformed markdown links" time="0.046">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;[this link](https://example.com)&quot;
Received string:    &quot;Check [this link](https://example.com&quot;
    at Object.toContain (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\url-formatter-youtube.test.js:39:22)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="URL Formatter - YouTube fixLinkFormatting should handle properly formatted links" name="URL Formatter - YouTube fixLinkFormatting should handle properly formatted links" time="0.001">
    </testcase>
    <testcase classname="URL Formatter - YouTube fixLinkFormatting should handle text without links" name="URL Formatter - YouTube fixLinkFormatting should handle text without links" time="0.001">
    </testcase>
    <testcase classname="URL Formatter - YouTube fixLinkFormatting should fix multiple malformed links" name="URL Formatter - YouTube fixLinkFormatting should fix multiple malformed links" time="0.001">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;[link1](https://example1.com)&quot;
Received string:    &quot;Check [link1](https://example1.com and [link2](https://example2.com&quot;
    at Object.toContain (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\url-formatter-youtube.test.js:57:22)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="URL Formatter - YouTube formatAllUrls should format all types of URLs" name="URL Formatter - YouTube formatAllUrls should format all types of URLs" time="0.029">
    </testcase>
    <testcase classname="URL Formatter - YouTube formatAllUrls should handle text without URLs" name="URL Formatter - YouTube formatAllUrls should handle text without URLs" time="0.004">
    </testcase>
    <testcase classname="URL Formatter - YouTube formatAllUrls should handle mixed content" name="URL Formatter - YouTube formatAllUrls should handle mixed content" time="0.002">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;(https://reddit.com/r/programming)&quot;
Received string:    &quot;Check (https://reddit.com/r/programming,) [YouTube Video](https://youtube.com/watch?v=abc123,) and (https://github.com/use[Reddit:) r/repo](https://reddit.com/r/repo)&quot;
    at Object.toContain (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\url-formatter-youtube.test.js:79:22)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="URL Formatter - YouTube Error handling should handle null input" name="URL Formatter - YouTube Error handling should handle null input" time="1.943">
    </testcase>
    <testcase classname="URL Formatter - YouTube Error handling should handle undefined input" name="URL Formatter - YouTube Error handling should handle undefined input" time="1.679">
    </testcase>
    <testcase classname="URL Formatter - YouTube Error handling should handle empty string input" name="URL Formatter - YouTube Error handling should handle empty string input" time="0.009">
    </testcase>
    <testcase classname="URL Formatter - YouTube Error handling should handle non-string input" name="URL Formatter - YouTube Error handling should handle non-string input" time="2.772">
    </testcase>
  </testsuite>
  <testsuite name="index.js - Event Handler Branch Coverage" errors="0" failures="1" skipped="0" timestamp="2025-09-24T08:29:03" time="16.985" tests="5">
    <testcase classname="index.js - Event Handler Branch Coverage Discord client event handlers should handle error events" name="index.js - Event Handler Branch Coverage Discord client event handlers should handle error events" time="8.057">
    </testcase>
    <testcase classname="index.js - Event Handler Branch Coverage Discord client event handlers should handle warning events" name="index.js - Event Handler Branch Coverage Discord client event handlers should handle warning events" time="0.166">
    </testcase>
    <testcase classname="index.js - Event Handler Branch Coverage Discord client event handlers should handle non-command interactions" name="index.js - Event Handler Branch Coverage Discord client event handlers should handle non-command interactions" time="0.26">
    </testcase>
    <testcase classname="index.js - Event Handler Branch Coverage Discord client event handlers should handle command interactions" name="index.js - Event Handler Branch Coverage Discord client event handlers should handle command interactions" time="0.579">
    </testcase>
    <testcase classname="index.js - Event Handler Branch Coverage Login process should handle login failure in production mode" name="index.js - Event Handler Branch Coverage Login process should handle login failure in production mode" time="0.526">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;PERPLEXITY&apos;)
    at new PERPLEXITY (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:53:31)
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:901:18)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\services\chat.js:5:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\index.js:35:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\index-branch-coverage-events.test.js:159:7)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Chat Service - Basic" errors="0" failures="1" skipped="0" timestamp="2025-09-24T08:29:18" time="3.028" tests="5">
    <testcase classname="Chat Service - Basic should ignore bot messages" name="Chat Service - Basic should ignore bot messages" time="0.017">
    </testcase>
    <testcase classname="Chat Service - Basic should ignore empty messages" name="Chat Service - Basic should ignore empty messages" time="0.009">
    </testcase>
    <testcase classname="Chat Service - Basic should handle regular chat messages" name="Chat Service - Basic should handle regular chat messages" time="0.298">
    </testcase>
    <testcase classname="Chat Service - Basic should handle command messages" name="Chat Service - Basic should handle command messages" time="0.008">
    </testcase>
    <testcase classname="Chat Service - Basic should handle rate limited users" name="Chat Service - Basic should handle rate limited users" time="0.029">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: &quot;Please wait a few seconds before sending another message.&quot;
Received: {&quot;embeds&quot;: [{&quot;color&quot;: &quot;#5865F2&quot;, &quot;description&quot;: &quot;AI response 😊&quot;, &quot;footer&quot;: {&quot;text&quot;: &quot;Aszai Bot&quot;}}]}

Number of calls: 1
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\chat-service-basic.test.js:96:27)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Performance Monitor - Core" errors="0" failures="4" skipped="0" timestamp="2025-09-24T08:29:19" time="1.804" tests="5">
    <testcase classname="Performance Monitor - Core initialize should start monitoring in production environment" name="Performance Monitor - Core initialize should start monitoring in production environment" time="0.009">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 123
Received: undefined
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\performance-monitor-core.test.js:80:45)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Performance Monitor - Core initialize should not start monitoring in test environment" name="Performance Monitor - Core initialize should not start monitoring in test environment" time="0.003">
      <failure>Error: expect(received).toBeNull()

Received: undefined
    at Object.toBeNull (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\performance-monitor-core.test.js:88:45)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Performance Monitor - Core initialize should not start monitoring if already initialized" name="Performance Monitor - Core initialize should not start monitoring if already initialized" time="0.005">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledTimes(expected)

Expected number of calls: 1
Received number of calls: 2
    at Object.toHaveBeenCalledTimes (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\performance-monitor-core.test.js:96:31)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Performance Monitor - Core shutdown should clear interval and reset state" name="Performance Monitor - Core shutdown should clear interval and reset state" time="0.002">
      <failure>Error: expect(received).toBeNull()

Received: undefined
    at Object.toBeNull (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\performance-monitor-core.test.js:107:45)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Performance Monitor - Core shutdown should handle shutdown when not initialized" name="Performance Monitor - Core shutdown should handle shutdown when not initialized" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="Conversation Manager - Advanced Features" errors="0" failures="5" skipped="0" timestamp="2025-09-24T08:29:20" time="1.21" tests="11">
    <testcase classname="Conversation Manager - Advanced Features isRateLimited returns false for new users" name="Conversation Manager - Advanced Features isRateLimited returns false for new users" time="0.01">
    </testcase>
    <testcase classname="Conversation Manager - Advanced Features isRateLimited returns true for users within rate limit window" name="Conversation Manager - Advanced Features isRateLimited returns true for users within rate limit window" time="0.003">
    </testcase>
    <testcase classname="Conversation Manager - Advanced Features isRateLimited returns false for users outside rate limit window" name="Conversation Manager - Advanced Features isRateLimited returns false for users outside rate limit window" time="0.01">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;WINDOW_MS&apos;)
    at Object.WINDOW_MS (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\conversation-manager-advanced.test.js:58:56)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Conversation Manager - Advanced Features getUserStats returns default stats for new users" name="Conversation Manager - Advanced Features getUserStats returns default stats for new users" time="0.025">
      <failure>Error: expect(received).toEqual(expected) // deep equality

- Expected  - 1
+ Received  + 0

  Object {
-   &quot;lastActive&quot;: null,
    &quot;messages&quot;: 0,
    &quot;summaries&quot;: 0,
  }
    at Object.toEqual (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\conversation-manager-advanced.test.js:71:21)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Conversation Manager - Advanced Features getUserStats returns existing stats for users with history" name="Conversation Manager - Advanced Features getUserStats returns existing stats for users with history" time="0.004">
    </testcase>
    <testcase classname="Conversation Manager - Advanced Features updateUserStats updates message count" name="Conversation Manager - Advanced Features updateUserStats updates message count" time="0.004">
    </testcase>
    <testcase classname="Conversation Manager - Advanced Features updateUserStats updates summary count" name="Conversation Manager - Advanced Features updateUserStats updates summary count" time="0.005">
    </testcase>
    <testcase classname="Conversation Manager - Advanced Features updateUserStats increments existing counts" name="Conversation Manager - Advanced Features updateUserStats increments existing counts" time="0.004">
    </testcase>
    <testcase classname="Conversation Manager - Advanced Features updateUserStats updates last active timestamp" name="Conversation Manager - Advanced Features updateUserStats updates last active timestamp" time="0.005">
      <failure>Error: expect(received).toBeGreaterThanOrEqual(expected)

Matcher error: received value must be a number or bigint

Received has value: undefined
    at Object.toBeGreaterThanOrEqual (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\conversation-manager-advanced.test.js:127:32)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Conversation Manager - Advanced Features destroy clears all intervals" name="Conversation Manager - Advanced Features destroy clears all intervals" time="0.002">
      <failure>TypeError: conversationManager.startCleanupInterval is not a function
    at Object.startCleanupInterval (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\conversation-manager-advanced.test.js:135:27)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Conversation Manager - Advanced Features destroy clears all conversation data" name="Conversation Manager - Advanced Features destroy clears all conversation data" time="0.008">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 1
Received: 2
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\conversation-manager-advanced.test.js:154:65)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="EnhancedCache - Eviction" errors="0" failures="4" skipped="0" timestamp="2025-09-24T08:29:21" time="1.281" tests="6">
    <testcase classname="EnhancedCache - Eviction Size Management should enforce max entries limit" name="EnhancedCache - Eviction Size Management should enforce max entries limit" time="0.009">
    </testcase>
    <testcase classname="EnhancedCache - Eviction Size Management should enforce max size limit" name="EnhancedCache - Eviction Size Management should enforce max size limit" time="0.016">
      <failure>Error: expect(received).toBeNull()

Received: &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;
    at Object.toBeNull (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\enhanced-cache-eviction.test.js:46:34)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="EnhancedCache - Eviction Size Management should calculate entry size correctly" name="EnhancedCache - Eviction Size Management should calculate entry size correctly" time="0.004">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;small&quot;
Received: null
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\enhanced-cache-eviction.test.js:56:34)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="EnhancedCache - Eviction Eviction Strategies should use LRU eviction strategy" name="EnhancedCache - Eviction Eviction Strategies should use LRU eviction strategy" time="0.003">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;value1&quot;
Received: null
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\enhanced-cache-eviction.test.js:76:33)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="EnhancedCache - Eviction Eviction Strategies should use LFU eviction strategy" name="EnhancedCache - Eviction Eviction Strategies should use LFU eviction strategy" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;value1&quot;
Received: null
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\enhanced-cache-eviction.test.js:103:36)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="EnhancedCache - Eviction Eviction Strategies should use TTL eviction strategy" name="EnhancedCache - Eviction Eviction Strategies should use TTL eviction strategy" time="0.005">
    </testcase>
  </testsuite>
  <testsuite name="Performance Monitor - Functions" errors="0" failures="2" skipped="0" timestamp="2025-09-24T08:29:21" time="1.793" tests="6">
    <testcase classname="Performance Monitor - Functions throttle functions should throttle function calls based on interval" name="Performance Monitor - Functions throttle functions should throttle function calls based on interval" time="0.189">
    </testcase>
    <testcase classname="Performance Monitor - Functions throttle functions should allow function calls after throttle interval" name="Performance Monitor - Functions throttle functions should allow function calls after throttle interval" time="0.128">
    </testcase>
    <testcase classname="Performance Monitor - Functions throttle functions should debounce function calls" name="Performance Monitor - Functions throttle functions should debounce function calls" time="0.181">
    </testcase>
    <testcase classname="Performance Monitor - Functions _getCpuInfo should return CPU information" name="Performance Monitor - Functions _getCpuInfo should return CPU information" time="0.005">
      <failure>Error: expect(received).toHaveProperty(path)

Expected path: &quot;cores&quot;
Received path: []

Received value: {&quot;idle&quot;: 0, &quot;total&quot;: 0}
    at Object.toHaveProperty (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\performance-monitor-functions.test.js:122:23)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Performance Monitor - Functions _checkPerformance should log performance metrics" name="Performance Monitor - Functions _checkPerformance should log performance metrics" time="0.053">
      <failure>Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)

Expected: StringContaining &quot;Performance metrics:&quot;

Number of calls: 0
    at Object.toHaveBeenCalledWith (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\performance-monitor-functions.test.js:133:28)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Performance Monitor - Functions _checkPerformance should handle errors gracefully" name="Performance Monitor - Functions _checkPerformance should handle errors gracefully" time="0.019">
    </testcase>
  </testsuite>
  <testsuite name="PerplexitySecure Service - Advanced" errors="0" failures="5" skipped="0" timestamp="2025-09-24T08:29:03" time="19.083" tests="10">
    <testcase classname="PerplexitySecure Service - Advanced question caching should cache questions and return cached responses" name="PerplexitySecure Service - Advanced question caching should cache questions and return cached responses" time="1.757">
      <failure>Error: Invalid response: response is null or undefined
    at Function.createError (C:\Users\ch\aszune\aszune-ai-bot\src\utils\error-handler.js:254:19)
    at PerplexityService.createError [as _handleApiResponse] (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:334:26)
    at PerplexityService._handleApiResponse [as sendChatRequest] (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:460:25)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at PerplexityService.generateChatResponse (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:525:20)
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\services\perplexity-secure-advanced.test.js:68:23)</failure>
    </testcase>
    <testcase classname="PerplexitySecure Service - Advanced question caching should not cache when caching is disabled" name="PerplexitySecure Service - Advanced question caching should not cache when caching is disabled" time="0.005">
    </testcase>
    <testcase classname="PerplexitySecure Service - Advanced question caching should handle cache file read errors gracefully" name="PerplexitySecure Service - Advanced question caching should handle cache file read errors gracefully" time="0.214">
    </testcase>
    <testcase classname="PerplexitySecure Service - Advanced question caching should handle cache file write errors gracefully" name="PerplexitySecure Service - Advanced question caching should handle cache file write errors gracefully" time="1.842">
    </testcase>
    <testcase classname="PerplexitySecure Service - Advanced question caching should handle corrupted cache data" name="PerplexitySecure Service - Advanced question caching should handle corrupted cache data" time="0.11">
    </testcase>
    <testcase classname="PerplexitySecure Service - Advanced file permission security should handle file permission errors gracefully" name="PerplexitySecure Service - Advanced file permission security should handle file permission errors gracefully" time="0.135">
    </testcase>
    <testcase classname="PerplexitySecure Service - Advanced file permission security should create cache directory with proper permissions" name="PerplexitySecure Service - Advanced file permission security should create cache directory with proper permissions" time="1.566">
      <failure>Error: expect(jest.fn()).toHaveBeenCalled()

Expected number of calls: &gt;= 1
Received number of calls:    0
    at Object.toHaveBeenCalled (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\services\perplexity-secure-advanced.test.js:200:24)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="PerplexitySecure Service - Advanced retry mechanism should retry on temporary failures" name="PerplexitySecure Service - Advanced retry mechanism should retry on temporary failures" time="0.179">
      <failure>Error: Temporary network error
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\services\perplexity-secure-advanced.test.js:208:32)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="PerplexitySecure Service - Advanced retry mechanism should not retry on permanent failures" name="PerplexitySecure Service - Advanced retry mechanism should not retry on permanent failures" time="1.286">
      <failure>Error: expect(received).toContain(expected) // indexOf

Expected substring: &quot;unable to process&quot;
Received string:    &quot;Success after retry&quot;
    at Object.toContain (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\services\perplexity-secure-advanced.test.js:226:22)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)</failure>
    </testcase>
    <testcase classname="PerplexitySecure Service - Advanced retry mechanism should handle timeout errors" name="PerplexitySecure Service - Advanced retry mechanism should handle timeout errors" time="0.144">
      <failure>Error: Permanent API error
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\services\perplexity-secure-advanced.test.js:221:37)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Logger - Basic" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:22" time="1.252" tests="11">
    <testcase classname="Logger - Basic logs debug messages" name="Logger - Basic logs debug messages" time="0.02">
    </testcase>
    <testcase classname="Logger - Basic logs debug messages with data" name="Logger - Basic logs debug messages with data" time="0.006">
    </testcase>
    <testcase classname="Logger - Basic logs info messages" name="Logger - Basic logs info messages" time="0.002">
    </testcase>
    <testcase classname="Logger - Basic logs warning messages" name="Logger - Basic logs warning messages" time="0.009">
    </testcase>
    <testcase classname="Logger - Basic logs error messages" name="Logger - Basic logs error messages" time="0.007">
    </testcase>
    <testcase classname="Logger - Basic logs error messages with data" name="Logger - Basic logs error messages with data" time="0.005">
    </testcase>
    <testcase classname="Logger - Basic handles empty messages" name="Logger - Basic handles empty messages" time="0.005">
    </testcase>
    <testcase classname="Logger - Basic handles null messages" name="Logger - Basic handles null messages" time="0.014">
    </testcase>
    <testcase classname="Logger - Basic handles undefined messages" name="Logger - Basic handles undefined messages" time="0.006">
    </testcase>
    <testcase classname="Logger - Basic handles messages with special characters" name="Logger - Basic handles messages with special characters" time="0.002">
    </testcase>
    <testcase classname="Logger - Basic handles messages with unicode characters" name="Logger - Basic handles messages with unicode characters" time="0.007">
    </testcase>
  </testsuite>
  <testsuite name="Message Formatter - Basic" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:22" time="1.078" tests="8">
    <testcase classname="Message Formatter - Basic formatResponse should format a response message with default options" name="Message Formatter - Basic formatResponse should format a response message with default options" time="0.011">
    </testcase>
    <testcase classname="Message Formatter - Basic formatResponse should remove excessive whitespace" name="Message Formatter - Basic formatResponse should remove excessive whitespace" time="0.013">
    </testcase>
    <testcase classname="Message Formatter - Basic formatResponse should truncate long messages" name="Message Formatter - Basic formatResponse should truncate long messages" time="0.008">
    </testcase>
    <testcase classname="Message Formatter - Basic formatResponse should handle empty messages" name="Message Formatter - Basic formatResponse should handle empty messages" time="0.002">
    </testcase>
    <testcase classname="Message Formatter - Basic formatResponse should handle null or undefined messages" name="Message Formatter - Basic formatResponse should handle null or undefined messages" time="0.001">
    </testcase>
    <testcase classname="Message Formatter - Basic formatResponse should handle messages with only whitespace" name="Message Formatter - Basic formatResponse should handle messages with only whitespace" time="0.013">
    </testcase>
    <testcase classname="Message Formatter - Basic formatResponse should preserve single line breaks" name="Message Formatter - Basic formatResponse should preserve single line breaks" time="0.001">
    </testcase>
    <testcase classname="Message Formatter - Basic formatResponse should handle messages with tabs" name="Message Formatter - Basic formatResponse should handle messages with tabs" time="0">
    </testcase>
  </testsuite>
  <testsuite name="Conversation Manager - Basic Operations" errors="0" failures="2" skipped="0" timestamp="2025-09-24T08:29:22" time="1.312" tests="7">
    <testcase classname="Conversation Manager - Basic Operations getHistory returns empty array for new users" name="Conversation Manager - Basic Operations getHistory returns empty array for new users" time="0.019">
    </testcase>
    <testcase classname="Conversation Manager - Basic Operations getHistory returns conversation history for existing users" name="Conversation Manager - Basic Operations getHistory returns conversation history for existing users" time="0.002">
    </testcase>
    <testcase classname="Conversation Manager - Basic Operations addMessage adds message to new conversation" name="Conversation Manager - Basic Operations addMessage adds message to new conversation" time="0.015">
    </testcase>
    <testcase classname="Conversation Manager - Basic Operations addMessage adds message to existing conversation" name="Conversation Manager - Basic Operations addMessage adds message to existing conversation" time="0.003">
    </testcase>
    <testcase classname="Conversation Manager - Basic Operations addMessage maintains conversation history limit" name="Conversation Manager - Basic Operations addMessage maintains conversation history limit" time="0.005">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;MAX_HISTORY_LENGTH&apos;)
    at Object.MAX_HISTORY_LENGTH (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\conversation-manager-basic.test.js:80:46)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="Conversation Manager - Basic Operations clearHistory clears conversation history for user" name="Conversation Manager - Basic Operations clearHistory clears conversation history for user" time="0.001">
    </testcase>
    <testcase classname="Conversation Manager - Basic Operations clearHistory clears all conversation data when no userId provided" name="Conversation Manager - Basic Operations clearHistory clears all conversation data when no userId provided" time="0.013">
      <failure>Error: expect(received).toHaveLength(expected)

Expected length: 0
Received length: 1
Received array:  [{&quot;content&quot;: &quot;hello&quot;, &quot;role&quot;: &quot;user&quot;}]
    at Object.toHaveLength (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\conversation-manager-basic.test.js:117:55)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Message Chunker - Basic" errors="0" failures="1" skipped="0" timestamp="2025-09-24T08:29:22" time="1.17" tests="7">
    <testcase classname="Message Chunker - Basic should not chunk message that fits within max length" name="Message Chunker - Basic should not chunk message that fits within max length" time="0.011">
    </testcase>
    <testcase classname="Message Chunker - Basic should chunk a message that exceeds max length" name="Message Chunker - Basic should chunk a message that exceeds max length" time="0.007">
    </testcase>
    <testcase classname="Message Chunker - Basic should preserve paragraph breaks when possible" name="Message Chunker - Basic should preserve paragraph breaks when possible" time="0.005">
    </testcase>
    <testcase classname="Message Chunker - Basic should add correct chunk numbering" name="Message Chunker - Basic should add correct chunk numbering" time="0.005">
    </testcase>
    <testcase classname="Message Chunker - Basic should handle empty message" name="Message Chunker - Basic should handle empty message" time="0.001">
    </testcase>
    <testcase classname="Message Chunker - Basic should handle null or undefined input" name="Message Chunker - Basic should handle null or undefined input" time="0.003">
    </testcase>
    <testcase classname="Message Chunker - Basic should handle very small chunk size" name="Message Chunker - Basic should handle very small chunk size" time="0.018">
      <failure>Error: expect(received).toBeLessThanOrEqual(expected)

Expected: &lt;= 15
Received:    18
    at toBeLessThanOrEqual (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\message-chunker-basic.test.js:66:28)
    at Array.forEach (&lt;anonymous&gt;)
    at Object.forEach (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\message-chunker-basic.test.js:65:12)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="EnhancedCache - TTL" errors="0" failures="1" skipped="0" timestamp="2025-09-24T08:29:23" time="1.232" tests="4">
    <testcase classname="EnhancedCache - TTL TTL (Time To Live) should respect default TTL" name="EnhancedCache - TTL TTL (Time To Live) should respect default TTL" time="0.029">
    </testcase>
    <testcase classname="EnhancedCache - TTL TTL (Time To Live) should respect custom TTL" name="EnhancedCache - TTL TTL (Time To Live) should respect custom TTL" time="0.007">
    </testcase>
    <testcase classname="EnhancedCache - TTL TTL (Time To Live) should not expire before TTL" name="EnhancedCache - TTL TTL (Time To Live) should not expire before TTL" time="0.007">
    </testcase>
    <testcase classname="EnhancedCache - TTL TTL (Time To Live) should handle zero TTL (immediate expiration)" name="EnhancedCache - TTL TTL (Time To Live) should handle zero TTL (immediate expiration)" time="0.011">
      <failure>Error: expect(received).toBeNull()

Received: &quot;value1&quot;
    at Object.toBeNull (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\enhanced-cache-ttl.test.js:67:33)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="index.js - Core Branch Coverage" errors="0" failures="9" skipped="0" timestamp="2025-09-24T08:29:15" time="8.774" tests="9">
    <testcase classname="index.js - Core Branch Coverage normal initialization - no PI optimizations" name="index.js - Core Branch Coverage normal initialization - no PI optimizations" time="1.084">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;DEFAULT_MAX_ENTRIES&apos;)
    at new DEFAULT_MAX_ENTRIES (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:63:29)
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:901:18)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\services\chat.js:5:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\index.js:35:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\index-branch-coverage-core.test.js:89:5)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="index.js - Core Branch Coverage handles error events" name="index.js - Core Branch Coverage handles error events" time="0.742">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;DEFAULT_MAX_ENTRIES&apos;)
    at new DEFAULT_MAX_ENTRIES (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:63:29)
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:901:18)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\services\chat.js:5:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\index.js:35:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\index-branch-coverage-core.test.js:100:5)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="index.js - Core Branch Coverage handles warn events" name="index.js - Core Branch Coverage handles warn events" time="0.515">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;DEFAULT_MAX_ENTRIES&apos;)
    at new DEFAULT_MAX_ENTRIES (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:63:29)
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:901:18)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\services\chat.js:5:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\index.js:35:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\index-branch-coverage-core.test.js:114:5)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="index.js - Core Branch Coverage handles interaction events" name="index.js - Core Branch Coverage handles interaction events" time="0.514">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;DEFAULT_MAX_ENTRIES&apos;)
    at new DEFAULT_MAX_ENTRIES (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:63:29)
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:901:18)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\services\chat.js:5:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\index.js:35:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\index-branch-coverage-core.test.js:131:5)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="index.js - Core Branch Coverage handles ready event with slash command registration failure" name="index.js - Core Branch Coverage handles ready event with slash command registration failure" time="0.466">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;DEFAULT_MAX_ENTRIES&apos;)
    at new DEFAULT_MAX_ENTRIES (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:63:29)
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:901:18)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\services\chat.js:5:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\index.js:35:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\index-branch-coverage-core.test.js:163:5)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="index.js - Core Branch Coverage handles PI optimizations" name="index.js - Core Branch Coverage handles PI optimizations" time="0.688">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;PERPLEXITY&apos;)
    at new PERPLEXITY (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:53:31)
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:901:18)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\services\chat.js:5:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\index.js:35:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\index-branch-coverage-core.test.js:185:5)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="index.js - Core Branch Coverage handles PI optimization failures" name="index.js - Core Branch Coverage handles PI optimization failures" time="0.432">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;PERPLEXITY&apos;)
    at new PERPLEXITY (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:53:31)
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:901:18)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\services\chat.js:5:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\index.js:35:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\index-branch-coverage-core.test.js:205:5)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="index.js - Core Branch Coverage handles login failures in production mode" name="index.js - Core Branch Coverage handles login failures in production mode" time="0.521">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;DEFAULT_MAX_ENTRIES&apos;)
    at new DEFAULT_MAX_ENTRIES (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:63:29)
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:901:18)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\services\chat.js:5:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\index.js:35:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\index-branch-coverage-core.test.js:223:5)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="index.js - Core Branch Coverage handles shutdown process" name="index.js - Core Branch Coverage handles shutdown process" time="0.438">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;DEFAULT_MAX_ENTRIES&apos;)
    at new DEFAULT_MAX_ENTRIES (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:63:29)
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:901:18)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\services\chat.js:5:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\index.js:35:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\index-branch-coverage-core.test.js:237:19)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Message Formatter - Advanced" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:23" time="1.116" tests="15">
    <testcase classname="Message Formatter - Advanced createCompactEmbed should return original embed when not in compact mode" name="Message Formatter - Advanced createCompactEmbed should return original embed when not in compact mode" time="0.004">
    </testcase>
    <testcase classname="Message Formatter - Advanced createCompactEmbed should create compact embed when in compact mode" name="Message Formatter - Advanced createCompactEmbed should create compact embed when in compact mode" time="0.004">
    </testcase>
    <testcase classname="Message Formatter - Advanced createCompactEmbed should handle embeds without fields" name="Message Formatter - Advanced createCompactEmbed should handle embeds without fields" time="0.002">
    </testcase>
    <testcase classname="Message Formatter - Advanced createCompactEmbed should handle embeds without description" name="Message Formatter - Advanced createCompactEmbed should handle embeds without description" time="0.001">
    </testcase>
    <testcase classname="Message Formatter - Advanced formatResponse with special content should handle messages with markdown formatting" name="Message Formatter - Advanced formatResponse with special content should handle messages with markdown formatting" time="0.002">
    </testcase>
    <testcase classname="Message Formatter - Advanced formatResponse with special content should handle messages with URLs" name="Message Formatter - Advanced formatResponse with special content should handle messages with URLs" time="0.002">
    </testcase>
    <testcase classname="Message Formatter - Advanced formatResponse with special content should handle messages with emojis" name="Message Formatter - Advanced formatResponse with special content should handle messages with emojis" time="0.001">
    </testcase>
    <testcase classname="Message Formatter - Advanced formatResponse with special content should handle messages with unicode characters" name="Message Formatter - Advanced formatResponse with special content should handle messages with unicode characters" time="0.001">
    </testcase>
    <testcase classname="Message Formatter - Advanced formatResponse with special content should handle messages with special characters" name="Message Formatter - Advanced formatResponse with special content should handle messages with special characters" time="0.001">
    </testcase>
    <testcase classname="Message Formatter - Advanced formatResponse with special content should handle messages with code blocks" name="Message Formatter - Advanced formatResponse with special content should handle messages with code blocks" time="0.001">
    </testcase>
    <testcase classname="Message Formatter - Advanced formatResponse with special content should handle messages with quotes" name="Message Formatter - Advanced formatResponse with special content should handle messages with quotes" time="0.001">
    </testcase>
    <testcase classname="Message Formatter - Advanced formatResponse with special content should handle messages with spoilers" name="Message Formatter - Advanced formatResponse with special content should handle messages with spoilers" time="0.001">
    </testcase>
    <testcase classname="Message Formatter - Advanced edge cases should handle very long single word" name="Message Formatter - Advanced edge cases should handle very long single word" time="0.002">
    </testcase>
    <testcase classname="Message Formatter - Advanced edge cases should handle messages with mixed content types" name="Message Formatter - Advanced edge cases should handle messages with mixed content types" time="0.004">
    </testcase>
    <testcase classname="Message Formatter - Advanced edge cases should handle messages with carriage returns" name="Message Formatter - Advanced edge cases should handle messages with carriage returns" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Bot Shutdown" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:24" time="3.824" tests="2">
    <testcase classname="Bot Shutdown should handle SIGINT and shut down gracefully" name="Bot Shutdown should handle SIGINT and shut down gracefully" time="2.546">
    </testcase>
    <testcase classname="Bot Shutdown should handle errors during shutdown and exit with code 1" name="Bot Shutdown should handle errors during shutdown and exit with code 1" time="0.18">
    </testcase>
  </testsuite>
  <testsuite name="Bot Main Entry Point (index.js)" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:24" time="3.134" tests="7">
    <testcase classname="Bot Main Entry Point (index.js) should create a Discord client and log in" name="Bot Main Entry Point (index.js) should create a Discord client and log in" time="0.423">
    </testcase>
    <testcase classname="Bot Main Entry Point (index.js) Graceful Shutdown should register handler for SIGINT signal" name="Bot Main Entry Point (index.js) Graceful Shutdown should register handler for SIGINT signal" time="0.044">
    </testcase>
    <testcase classname="Bot Main Entry Point (index.js) Graceful Shutdown should register handler for SIGTERM signal" name="Bot Main Entry Point (index.js) Graceful Shutdown should register handler for SIGTERM signal" time="0.036">
    </testcase>
    <testcase classname="Bot Main Entry Point (index.js) Graceful Shutdown should register handler for uncaughtException" name="Bot Main Entry Point (index.js) Graceful Shutdown should register handler for uncaughtException" time="0.054">
    </testcase>
    <testcase classname="Bot Main Entry Point (index.js) Graceful Shutdown should call shutdown when uncaught exception occurs" name="Bot Main Entry Point (index.js) Graceful Shutdown should call shutdown when uncaught exception occurs" time="0.104">
    </testcase>
    <testcase classname="Bot Main Entry Point (index.js) Graceful Shutdown should log an error and exit if shutdown fails" name="Bot Main Entry Point (index.js) Graceful Shutdown should log an error and exit if shutdown fails" time="0.128">
    </testcase>
    <testcase classname="Bot Main Entry Point (index.js) Graceful Shutdown should register handler for unhandled promise rejections" name="Bot Main Entry Point (index.js) Graceful Shutdown should register handler for unhandled promise rejections" time="0.049">
    </testcase>
  </testsuite>
  <testsuite name="Enhanced Message Chunker" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:24" time="2.289" tests="5">
    <testcase classname="Enhanced Message Chunker processes source references correctly" name="Enhanced Message Chunker processes source references correctly" time="0.015">
    </testcase>
    <testcase classname="Enhanced Message Chunker handles YouTube links in sources correctly" name="Enhanced Message Chunker handles YouTube links in sources correctly" time="0.002">
    </testcase>
    <testcase classname="Enhanced Message Chunker preserves formatting for multiple source references" name="Enhanced Message Chunker preserves formatting for multiple source references" time="0.008">
    </testcase>
    <testcase classname="Enhanced Message Chunker chunking preserves source references across chunks" name="Enhanced Message Chunker chunking preserves source references across chunks" time="0.127">
    </testcase>
    <testcase classname="Enhanced Message Chunker handles URLs split between chunks" name="Enhanced Message Chunker handles URLs split between chunks" time="0.06">
    </testcase>
  </testsuite>
  <testsuite name="Main Index - Advanced" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:24" time="4.023" tests="9">
    <testcase classname="Main Index - Advanced should handle bootWithOptimizations function" name="Main Index - Advanced should handle bootWithOptimizations function" time="0.844">
    </testcase>
    <testcase classname="Main Index - Advanced should handle registerSlashCommands function" name="Main Index - Advanced should handle registerSlashCommands function" time="0.152">
    </testcase>
    <testcase classname="Main Index - Advanced should handle Pi optimization detection" name="Main Index - Advanced should handle Pi optimization detection" time="0.008">
    </testcase>
    <testcase classname="Main Index - Advanced should handle enhanced cache initialization" name="Main Index - Advanced should handle enhanced cache initialization" time="0.014">
    </testcase>
    <testcase classname="Main Index - Advanced should handle perplexity service initialization" name="Main Index - Advanced should handle perplexity service initialization" time="0.002">
    </testcase>
    <testcase classname="Main Index - Advanced should handle error scenarios gracefully" name="Main Index - Advanced should handle error scenarios gracefully" time="0.095">
    </testcase>
    <testcase classname="Main Index - Advanced should handle multiple imports without conflicts" name="Main Index - Advanced should handle multiple imports without conflicts" time="0.173">
    </testcase>
    <testcase classname="Main Index - Advanced should handle environment variable changes" name="Main Index - Advanced should handle environment variable changes" time="0.246">
    </testcase>
    <testcase classname="Main Index - Advanced should handle missing dependencies gracefully" name="Main Index - Advanced should handle missing dependencies gracefully" time="0.245">
    </testcase>
  </testsuite>
  <testsuite name="Error handling" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:26" time="2.174" tests="2">
    <testcase classname="Error handling handles failed Perplexity API response during chat" name="Error handling handles failed Perplexity API response during chat" time="0.148">
    </testcase>
    <testcase classname="Error handling handles failed summary API response" name="Error handling handles failed summary API response" time="0.052">
    </testcase>
  </testsuite>
  <testsuite name="Main Index - Basic" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:26" time="3.1" tests="6">
    <testcase classname="Main Index - Basic should export required functions" name="Main Index - Basic should export required functions" time="1.24">
    </testcase>
    <testcase classname="Main Index - Basic should initialize client properly" name="Main Index - Basic should initialize client properly" time="0.154">
    </testcase>
    <testcase classname="Main Index - Basic should have handleChatMessage function" name="Main Index - Basic should have handleChatMessage function" time="0.144">
    </testcase>
    <testcase classname="Main Index - Basic should have shutdown function" name="Main Index - Basic should have shutdown function" time="0.1">
    </testcase>
    <testcase classname="Main Index - Basic should have error handler functions" name="Main Index - Basic should have error handler functions" time="0.12">
    </testcase>
    <testcase classname="Main Index - Basic should handle module loading without errors" name="Main Index - Basic should handle module loading without errors" time="0.098">
    </testcase>
  </testsuite>
  <testsuite name="Bot Edge Cases - Advanced" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:24" time="4.321" tests="14">
    <testcase classname="Bot Edge Cases - Advanced should handle messages with mixed content types" name="Bot Edge Cases - Advanced should handle messages with mixed content types" time="0.029">
    </testcase>
    <testcase classname="Bot Edge Cases - Advanced should handle messages with URLs" name="Bot Edge Cases - Advanced should handle messages with URLs" time="0.013">
    </testcase>
    <testcase classname="Bot Edge Cases - Advanced should handle messages with email addresses" name="Bot Edge Cases - Advanced should handle messages with email addresses" time="0.005">
    </testcase>
    <testcase classname="Bot Edge Cases - Advanced should handle messages with mentions" name="Bot Edge Cases - Advanced should handle messages with mentions" time="0.026">
    </testcase>
    <testcase classname="Bot Edge Cases - Advanced should handle messages with channel mentions" name="Bot Edge Cases - Advanced should handle messages with channel mentions" time="0.003">
    </testcase>
    <testcase classname="Bot Edge Cases - Advanced should handle messages with role mentions" name="Bot Edge Cases - Advanced should handle messages with role mentions" time="0.002">
    </testcase>
    <testcase classname="Bot Edge Cases - Advanced should handle messages with custom emojis" name="Bot Edge Cases - Advanced should handle messages with custom emojis" time="0.002">
    </testcase>
    <testcase classname="Bot Edge Cases - Advanced should handle messages with animated emojis" name="Bot Edge Cases - Advanced should handle messages with animated emojis" time="0.006">
    </testcase>
    <testcase classname="Bot Edge Cases - Advanced should handle messages with timestamps" name="Bot Edge Cases - Advanced should handle messages with timestamps" time="0.009">
    </testcase>
    <testcase classname="Bot Edge Cases - Advanced should handle messages with spoilers" name="Bot Edge Cases - Advanced should handle messages with spoilers" time="0.011">
    </testcase>
    <testcase classname="Bot Edge Cases - Advanced should handle messages with strikethrough" name="Bot Edge Cases - Advanced should handle messages with strikethrough" time="0.024">
    </testcase>
    <testcase classname="Bot Edge Cases - Advanced should handle messages with underlines" name="Bot Edge Cases - Advanced should handle messages with underlines" time="0.002">
    </testcase>
    <testcase classname="Bot Edge Cases - Advanced should handle messages with quotes" name="Bot Edge Cases - Advanced should handle messages with quotes" time="0.002">
    </testcase>
    <testcase classname="Bot Edge Cases - Advanced should handle messages with code blocks" name="Bot Edge Cases - Advanced should handle messages with code blocks" time="0.009">
    </testcase>
  </testsuite>
  <testsuite name="Perplexity Service - Basic" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:27" time="2.611" tests="6">
    <testcase classname="Perplexity Service - Basic sendChatRequest sends a request to the API with correct parameters" name="Perplexity Service - Basic sendChatRequest sends a request to the API with correct parameters" time="0.023">
    </testcase>
    <testcase classname="Perplexity Service - Basic sendChatRequest throws an error when API request fails" name="Perplexity Service - Basic sendChatRequest throws an error when API request fails" time="0.287">
    </testcase>
    <testcase classname="Perplexity Service - Basic sendChatRequest handles network errors gracefully" name="Perplexity Service - Basic sendChatRequest handles network errors gracefully" time="0.12">
    </testcase>
    <testcase classname="Perplexity Service - Basic sendChatRequest handles empty messages array" name="Perplexity Service - Basic sendChatRequest handles empty messages array" time="0.004">
    </testcase>
    <testcase classname="Perplexity Service - Basic sendChatRequest handles single message" name="Perplexity Service - Basic sendChatRequest handles single message" time="0.005">
    </testcase>
    <testcase classname="Perplexity Service - Basic sendChatRequest handles multiple messages" name="Perplexity Service - Basic sendChatRequest handles multiple messages" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="Config" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:27" time="2.003" tests="7">
    <testcase classname="Config basic configuration exports required configuration settings" name="Config basic configuration exports required configuration settings" time="0.032">
    </testcase>
    <testcase classname="Config basic configuration should have required environment variables available" name="Config basic configuration should have required environment variables available" time="0.031">
    </testcase>
    <testcase classname="Config nested configuration should have API configuration" name="Config nested configuration should have API configuration" time="0.016">
    </testcase>
    <testcase classname="Config nested configuration should have system messages defined" name="Config nested configuration should have system messages defined" time="0.011">
    </testcase>
    <testcase classname="Config nested configuration should have emoji reactions defined" name="Config nested configuration should have emoji reactions defined" time="0.056">
    </testcase>
    <testcase classname="Config initializePiOptimizations should have initializePiOptimizations function available" name="Config initializePiOptimizations should have initializePiOptimizations function available" time="0.025">
    </testcase>
    <testcase classname="Config initializePiOptimizations should return a promise when initializePiOptimizations is called" name="Config initializePiOptimizations should return a promise when initializePiOptimizations is called" time="0.017">
    </testcase>
  </testsuite>
  <testsuite name="Lazy Loader" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:28" time="1.334" tests="4">
    <testcase classname="Lazy Loader basic functionality should return a function that loads a module when called" name="Lazy Loader basic functionality should return a function that loads a module when called" time="0.008">
    </testcase>
    <testcase classname="Lazy Loader basic functionality should handle modules with methods" name="Lazy Loader basic functionality should handle modules with methods" time="0.003">
    </testcase>
    <testcase classname="Lazy Loader memoization should memoize the loaded module" name="Lazy Loader memoization should memoize the loaded module" time="0.018">
    </testcase>
    <testcase classname="Lazy Loader error handling should handle errors in the loader function" name="Lazy Loader error handling should handle errors in the loader function" time="0.065">
    </testcase>
  </testsuite>
  <testsuite name="Cache Pruner" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:29" time="1.087" tests="8">
    <testcase classname="Cache Pruner _initializePruningSchedule should set up interval based on config" name="Cache Pruner _initializePruningSchedule should set up interval based on config" time="0.02">
    </testcase>
    <testcase classname="Cache Pruner _initializePruningSchedule should execute pruneCache on interval" name="Cache Pruner _initializePruningSchedule should execute pruneCache on interval" time="0.002">
    </testcase>
    <testcase classname="Cache Pruner pruneCache should call both pruning methods" name="Cache Pruner pruneCache should call both pruning methods" time="0.003">
    </testcase>
    <testcase classname="Cache Pruner pruneCache should handle errors" name="Cache Pruner pruneCache should handle errors" time="0.056">
    </testcase>
    <testcase classname="Cache Pruner _pruneQuestionCache should prune when over max entries" name="Cache Pruner _pruneQuestionCache should prune when over max entries" time="0.007">
    </testcase>
    <testcase classname="Cache Pruner _pruneQuestionCache should not prune when under max entries" name="Cache Pruner _pruneQuestionCache should not prune when under max entries" time="0.017">
    </testcase>
    <testcase classname="Cache Pruner _pruneQuestionCache should handle missing file gracefully" name="Cache Pruner _pruneQuestionCache should handle missing file gracefully" time="0.005">
    </testcase>
    <testcase classname="Cache Pruner getStatus should return correct status information" name="Cache Pruner getStatus should return correct status information" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="Bot Initialization" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:29" time="1.67" tests="2">
    <testcase classname="Bot Initialization should create a Discord client and log in" name="Bot Initialization should create a Discord client and log in" time="0.624">
    </testcase>
    <testcase classname="Bot Initialization should register event handlers" name="Bot Initialization should register event handlers" time="0.065">
    </testcase>
  </testsuite>
  <testsuite name="Logger - Branch Coverage Tests" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:30" time="1.313" tests="12">
    <testcase classname="Logger - Branch Coverage Tests skips debug logs when log level is higher" name="Logger - Branch Coverage Tests skips debug logs when log level is higher" time="0.029">
    </testcase>
    <testcase classname="Logger - Branch Coverage Tests skips info logs when log level is higher" name="Logger - Branch Coverage Tests skips info logs when log level is higher" time="0.046">
    </testcase>
    <testcase classname="Logger - Branch Coverage Tests skips warning logs when log level is higher" name="Logger - Branch Coverage Tests skips warning logs when log level is higher" time="0.008">
    </testcase>
    <testcase classname="Logger - Branch Coverage Tests handles directory creation failure" name="Logger - Branch Coverage Tests handles directory creation failure" time="0.032">
    </testcase>
    <testcase classname="Logger - Branch Coverage Tests tests log file rotation" name="Logger - Branch Coverage Tests tests log file rotation" time="0.029">
    </testcase>
    <testcase classname="Logger - Branch Coverage Tests handles custom log size limit" name="Logger - Branch Coverage Tests handles custom log size limit" time="0.02">
    </testcase>
    <testcase classname="Logger - Branch Coverage Tests handles file stat errors during log rotation" name="Logger - Branch Coverage Tests handles file stat errors during log rotation" time="0.016">
    </testcase>
    <testcase classname="Logger - Branch Coverage Tests handles request errors in error method" name="Logger - Branch Coverage Tests handles request errors in error method" time="0.043">
    </testcase>
    <testcase classname="Logger - Branch Coverage Tests handles invalid log levels" name="Logger - Branch Coverage Tests handles invalid log levels" time="0.036">
    </testcase>
    <testcase classname="Logger - Branch Coverage Tests handles file write errors" name="Logger - Branch Coverage Tests handles file write errors" time="0.026">
    </testcase>
    <testcase classname="Logger - Branch Coverage Tests handles errors during log rotation" name="Logger - Branch Coverage Tests handles errors during log rotation" time="0.046">
    </testcase>
    <testcase classname="Logger - Branch Coverage Tests handles unlink errors during log cleanup" name="Logger - Branch Coverage Tests handles unlink errors during log cleanup" time="0.009">
    </testcase>
  </testsuite>
  <testsuite name="Connection Throttler" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:30" time="1.138" tests="5">
    <testcase classname="Connection Throttler executeRequest should execute requests immediately when under max connections" name="Connection Throttler executeRequest should execute requests immediately when under max connections" time="0.017">
    </testcase>
    <testcase classname="Connection Throttler executeRequest should queue requests when at max connections" name="Connection Throttler executeRequest should queue requests when at max connections" time="0.026">
    </testcase>
    <testcase classname="Connection Throttler executeRequest should handle errors in requests" name="Connection Throttler executeRequest should handle errors in requests" time="0.059">
    </testcase>
    <testcase classname="Connection Throttler executeRequest should process next queue item after completion" name="Connection Throttler executeRequest should process next queue item after completion" time="0.003">
    </testcase>
    <testcase classname="Connection Throttler clearQueue should clear all queued requests" name="Connection Throttler clearQueue should clear all queued requests" time="0.008">
    </testcase>
  </testsuite>
  <testsuite name="Debouncer" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:30" time="1.117" tests="4">
    <testcase classname="Debouncer debounce should delay function execution" name="Debouncer debounce should delay function execution" time="0.028">
    </testcase>
    <testcase classname="Debouncer debounce should only execute once for multiple rapid calls" name="Debouncer debounce should only execute once for multiple rapid calls" time="0.011">
    </testcase>
    <testcase classname="Debouncer debounce should reset the timer when called again during wait time" name="Debouncer debounce should reset the timer when called again during wait time" time="0.008">
    </testcase>
    <testcase classname="Debouncer debounce should pass arguments to the debounced function" name="Debouncer debounce should pass arguments to the debounced function" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="EnhancedCache - Basic Operations" errors="0" failures="2" skipped="0" timestamp="2025-09-24T08:29:31" time="1.138" tests="7">
    <testcase classname="EnhancedCache - Basic Operations Basic Operations should set and get values" name="EnhancedCache - Basic Operations Basic Operations should set and get values" time="0.011">
    </testcase>
    <testcase classname="EnhancedCache - Basic Operations Basic Operations should return null for non-existent keys" name="EnhancedCache - Basic Operations Basic Operations should return null for non-existent keys" time="0.001">
    </testcase>
    <testcase classname="EnhancedCache - Basic Operations Basic Operations should check if key exists by getting it" name="EnhancedCache - Basic Operations Basic Operations should check if key exists by getting it" time="0.001">
    </testcase>
    <testcase classname="EnhancedCache - Basic Operations Basic Operations should delete keys" name="EnhancedCache - Basic Operations Basic Operations should delete keys" time="0.007">
    </testcase>
    <testcase classname="EnhancedCache - Basic Operations Basic Operations should clear all entries" name="EnhancedCache - Basic Operations Basic Operations should clear all entries" time="0.004">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;value1&quot;
Received: null
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\enhanced-cache-basic.test.js:51:33)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="EnhancedCache - Basic Operations Basic Operations should handle different value types" name="EnhancedCache - Basic Operations Basic Operations should handle different value types" time="0.002">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: &quot;hello&quot;
Received: null
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\enhanced-cache-basic.test.js:65:35)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="EnhancedCache - Basic Operations Basic Operations should update existing keys" name="EnhancedCache - Basic Operations Basic Operations should update existing keys" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Undici mock helpers" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:31" time="1.128" tests="3">
    <testcase classname="Undici mock helpers should create a success response with expected structure" name="Undici mock helpers should create a success response with expected structure" time="0.007">
    </testcase>
    <testcase classname="Undici mock helpers should create an error response with expected structure" name="Undici mock helpers should create an error response with expected structure" time="0.005">
    </testcase>
    <testcase classname="Undici mock helpers should use default status code for error responses" name="Undici mock helpers should use default status code for error responses" time="0.013">
    </testcase>
  </testsuite>
  <testsuite name="DataStorage" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:31" time="1.025" tests="9">
    <testcase classname="DataStorage init should create data directory if it does not exist" name="DataStorage init should create data directory if it does not exist" time="0.011">
    </testcase>
    <testcase classname="DataStorage init should not create directory if already initialized" name="DataStorage init should not create directory if already initialized" time="0.003">
    </testcase>
    <testcase classname="DataStorage init should throw and log error if mkdir fails" name="DataStorage init should throw and log error if mkdir fails" time="0.047">
    </testcase>
    <testcase classname="DataStorage saveUserStats should save user stats to file" name="DataStorage saveUserStats should save user stats to file" time="0.004">
    </testcase>
    <testcase classname="DataStorage saveUserStats should log error if writeFile fails" name="DataStorage saveUserStats should log error if writeFile fails" time="0.001">
    </testcase>
    <testcase classname="DataStorage loadUserStats should load user stats from file" name="DataStorage loadUserStats should load user stats from file" time="0.002">
    </testcase>
    <testcase classname="DataStorage loadUserStats should return empty object if file does not exist" name="DataStorage loadUserStats should return empty object if file does not exist" time="0.002">
    </testcase>
    <testcase classname="DataStorage loadUserStats should return empty object and log error if readFile fails for other reasons" name="DataStorage loadUserStats should return empty object and log error if readFile fails for other reasons" time="0.002">
    </testcase>
    <testcase classname="DataStorage loadUserStats should return empty object and log error if JSON parsing fails" name="DataStorage loadUserStats should return empty object and log error if JSON parsing fails" time="0.013">
    </testcase>
  </testsuite>
  <testsuite name="Bot Edge Cases - Basic" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:30" time="2.694" tests="8">
    <testcase classname="Bot Edge Cases - Basic should handle empty messages" name="Bot Edge Cases - Basic should handle empty messages" time="0.015">
    </testcase>
    <testcase classname="Bot Edge Cases - Basic should handle messages with only whitespace" name="Bot Edge Cases - Basic should handle messages with only whitespace" time="0.002">
    </testcase>
    <testcase classname="Bot Edge Cases - Basic should handle very long messages" name="Bot Edge Cases - Basic should handle very long messages" time="0.001">
    </testcase>
    <testcase classname="Bot Edge Cases - Basic should handle messages with special characters" name="Bot Edge Cases - Basic should handle messages with special characters" time="0.013">
    </testcase>
    <testcase classname="Bot Edge Cases - Basic should handle messages with unicode characters" name="Bot Edge Cases - Basic should handle messages with unicode characters" time="0.004">
    </testcase>
    <testcase classname="Bot Edge Cases - Basic should handle messages with newlines" name="Bot Edge Cases - Basic should handle messages with newlines" time="0.001">
    </testcase>
    <testcase classname="Bot Edge Cases - Basic should handle messages with tabs" name="Bot Edge Cases - Basic should handle messages with tabs" time="0.004">
    </testcase>
    <testcase classname="Bot Edge Cases - Basic should handle messages with carriage returns" name="Bot Edge Cases - Basic should handle messages with carriage returns" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="Test Utilities" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:31" time="0.998" tests="5">
    <testcase classname="Test Utilities createMockMessage creates a default mock message with expected properties" name="Test Utilities createMockMessage creates a default mock message with expected properties" time="0.007">
    </testcase>
    <testcase classname="Test Utilities createMockMessage allows custom options" name="Test Utilities createMockMessage allows custom options" time="0.003">
    </testcase>
    <testcase classname="Test Utilities createMockInteraction creates a default mock interaction with expected properties" name="Test Utilities createMockInteraction creates a default mock interaction with expected properties" time="0.005">
    </testcase>
    <testcase classname="Test Utilities createMockInteraction allows custom options" name="Test Utilities createMockInteraction allows custom options" time="0.003">
    </testcase>
    <testcase classname="Test Utilities resetMocks resets all mocks" name="Test Utilities resetMocks resets all mocks" time="0.021">
    </testcase>
  </testsuite>
  <testsuite name="Commands - Slash Commands Data" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:30" time="2.676" tests="1">
    <testcase classname="Commands - Slash Commands Data getSlashCommandsData should return an array of slash command data" name="Commands - Slash Commands Data getSlashCommandsData should return an array of slash command data" time="0.023">
    </testcase>
  </testsuite>
  <testsuite name="Bot Error Handling" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:32" time="1.084" tests="2">
    <testcase classname="Bot Error Handling should log uncaught exceptions" name="Bot Error Handling should log uncaught exceptions" time="0.004">
    </testcase>
    <testcase classname="Bot Error Handling should log unhandled promise rejections" name="Bot Error Handling should log unhandled promise rejections" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="appendEmoji" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:32" time="0.96" tests="8">
    <testcase classname="appendEmoji adds the correct emoji for known keywords" name="appendEmoji adds the correct emoji for known keywords" time="0.008">
    </testcase>
    <testcase classname="appendEmoji does not modify the text if no keyword is present" name="appendEmoji does not modify the text if no keyword is present" time="0.001">
    </testcase>
    <testcase classname="appendEmoji is case-insensitive" name="appendEmoji is case-insensitive" time="0.001">
    </testcase>
    <testcase classname="appendEmoji can add multiple emojis" name="appendEmoji can add multiple emojis" time="0.003">
    </testcase>
    <testcase classname="appendEmoji does not add emoji for keywords inside other words" name="appendEmoji does not add emoji for keywords inside other words" time="0.001">
    </testcase>
    <testcase classname="appendEmoji adds all matching emojis in correct order" name="appendEmoji adds all matching emojis in correct order" time="0.001">
    </testcase>
    <testcase classname="appendEmoji handles empty string" name="appendEmoji handles empty string" time="0.001">
    </testcase>
    <testcase classname="appendEmoji handles string with only emojis as keywords" name="appendEmoji handles string with only emojis as keywords" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="Memory Monitor - Core" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:32" time="0.969" tests="7">
    <testcase classname="Memory Monitor - Core should have correct default values" name="Memory Monitor - Core should have correct default values" time="0.01">
    </testcase>
    <testcase classname="Memory Monitor - Core should initialize successfully" name="Memory Monitor - Core should initialize successfully" time="0.006">
    </testcase>
    <testcase classname="Memory Monitor - Core should not initialize if already initialized" name="Memory Monitor - Core should not initialize if already initialized" time="0.003">
    </testcase>
    <testcase classname="Memory Monitor - Core should setup memory check interval on initialization" name="Memory Monitor - Core should setup memory check interval on initialization" time="0.002">
    </testcase>
    <testcase classname="Memory Monitor - Core should shutdown successfully when initialized" name="Memory Monitor - Core should shutdown successfully when initialized" time="0.002">
    </testcase>
    <testcase classname="Memory Monitor - Core should handle shutdown when not initialized" name="Memory Monitor - Core should handle shutdown when not initialized" time="0.002">
    </testcase>
    <testcase classname="Memory Monitor - Core should clear interval on shutdown" name="Memory Monitor - Core should clear interval on shutdown" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="Logger Mock" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:32" time="0.9" tests="4">
    <testcase classname="Logger Mock logger mock exists" name="Logger Mock logger mock exists" time="0.004">
    </testcase>
    <testcase classname="Logger Mock logger mock has required methods" name="Logger Mock logger mock has required methods" time="0.005">
    </testcase>
    <testcase classname="Logger Mock handleError returns a value" name="Logger Mock handleError returns a value" time="0.002">
    </testcase>
    <testcase classname="Logger Mock _formatMessage returns a formatted message" name="Logger Mock _formatMessage returns a formatted message" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="index.js - Function Branch Coverage" errors="0" failures="5" skipped="0" timestamp="2025-09-24T08:29:04" time="29.67" tests="5">
    <testcase classname="index.js - Function Branch Coverage bootWithOptimizations function should handle errors in Pi optimization initialization" name="index.js - Function Branch Coverage bootWithOptimizations function should handle errors in Pi optimization initialization" time="12.758">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;DEFAULT_MAX_ENTRIES&apos;)
    at new DEFAULT_MAX_ENTRIES (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:63:29)
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:901:18)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\services\chat.js:5:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\index.js:35:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\index-branch-coverage-functions.test.js:46:15)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="index.js - Function Branch Coverage bootWithOptimizations function should not call initialization when PI_OPTIMIZATIONS is disabled" name="index.js - Function Branch Coverage bootWithOptimizations function should not call initialization when PI_OPTIMIZATIONS is disabled" time="4.073">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;DEFAULT_MAX_ENTRIES&apos;)
    at new DEFAULT_MAX_ENTRIES (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:63:29)
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:901:18)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\services\chat.js:5:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\index.js:35:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\index-branch-coverage-functions.test.js:46:15)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="index.js - Function Branch Coverage registerSlashCommands function should handle client not being ready" name="index.js - Function Branch Coverage registerSlashCommands function should handle client not being ready" time="0.429">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;DEFAULT_MAX_ENTRIES&apos;)
    at new DEFAULT_MAX_ENTRIES (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:63:29)
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:901:18)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\services\chat.js:5:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\index.js:35:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\index-branch-coverage-functions.test.js:113:15)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="index.js - Function Branch Coverage registerSlashCommands function should handle errors during slash command registration" name="index.js - Function Branch Coverage registerSlashCommands function should handle errors during slash command registration" time="0.361">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;DEFAULT_MAX_ENTRIES&apos;)
    at new DEFAULT_MAX_ENTRIES (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:63:29)
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:901:18)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\services\chat.js:5:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\index.js:35:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\index-branch-coverage-functions.test.js:113:15)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="index.js - Function Branch Coverage Multiple shutdown attempts should prevent multiple simultaneous shutdown attempts" name="index.js - Function Branch Coverage Multiple shutdown attempts should prevent multiple simultaneous shutdown attempts" time="0.397">
      <failure>TypeError: Cannot read properties of undefined (reading &apos;DEFAULT_MAX_ENTRIES&apos;)
    at new DEFAULT_MAX_ENTRIES (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:63:29)
    at Object.&lt;anonymous&gt; (C:\Users\ch\aszune\aszune-ai-bot\src\services\perplexity-secure.js:901:18)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\services\chat.js:5:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\src\index.js:35:27)
    at Runtime._execModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1439:24)
    at Runtime._loadModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1022:12)
    at Runtime.requireModule (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:882:12)
    at Runtime.requireModuleOrMock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runtime\build\index.js:1048:21)
    at Object.require (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\index-branch-coverage-functions.test.js:164:15)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusHook (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:281:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:246:5)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
  </testsuite>
  <testsuite name="Discord.js mock" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:33" time="0.939" tests="3">
    <testcase classname="Discord.js mock Client mock exists" name="Discord.js mock Client mock exists" time="0.003">
    </testcase>
    <testcase classname="Discord.js mock Client mock has required methods" name="Discord.js mock Client mock has required methods" time="0.004">
    </testcase>
    <testcase classname="Discord.js mock SlashCommandBuilder mock exists" name="Discord.js mock SlashCommandBuilder mock exists" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Undici Mock" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:33" time="0.959" tests="1">
    <testcase classname="Undici Mock should exist" name="Undici Mock should exist" time="0.003">
    </testcase>
  </testsuite>
  <testsuite name="EmojiManager" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:33" time="0.935" tests="7">
    <testcase classname="EmojiManager adds emojis to response based on keywords" name="EmojiManager adds emojis to response based on keywords" time="0.003">
    </testcase>
    <testcase classname="EmojiManager adds multiple emojis when multiple keywords are found" name="EmojiManager adds multiple emojis when multiple keywords are found" time="0.008">
    </testcase>
    <testcase classname="EmojiManager does not add emojis when no keywords are found" name="EmojiManager does not add emojis when no keywords are found" time="0.003">
    </testcase>
    <testcase classname="EmojiManager gets reactions for a message based on keywords" name="EmojiManager gets reactions for a message based on keywords" time="0.002">
    </testcase>
    <testcase classname="EmojiManager returns empty array when no reaction keywords are found" name="EmojiManager returns empty array when no reaction keywords are found" time="0.002">
    </testcase>
    <testcase classname="EmojiManager adds reactions to a message" name="EmojiManager adds reactions to a message" time="0.003">
    </testcase>
    <testcase classname="EmojiManager handles errors when adding reactions" name="EmojiManager handles errors when adding reactions" time="0.019">
    </testcase>
  </testsuite>
  <testsuite name="Discord.js mock" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:33" time="1.032" tests="3">
    <testcase classname="Discord.js mock Client mock exists" name="Discord.js mock Client mock exists" time="0.007">
    </testcase>
    <testcase classname="Discord.js mock Client mock has required methods" name="Discord.js mock Client mock has required methods" time="0.003">
    </testcase>
    <testcase classname="Discord.js mock SlashCommandBuilder mock exists" name="Discord.js mock SlashCommandBuilder mock exists" time="0.001">
    </testcase>
  </testsuite>
  <testsuite name="Command Handling - Advanced" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:23" time="11.31" tests="12">
    <testcase classname="Command Handling - Advanced !summarise command with text parameter" name="Command Handling - Advanced !summarise command with text parameter" time="0.013">
    </testcase>
    <testcase classname="Command Handling - Advanced !summerise command with text parameter (alternative spelling)" name="Command Handling - Advanced !summerise command with text parameter (alternative spelling)" time="0.003">
    </testcase>
    <testcase classname="Command Handling - Advanced handles empty summarise command" name="Command Handling - Advanced handles empty summarise command" time="0.001">
    </testcase>
    <testcase classname="Command Handling - Advanced handles summarise command with only whitespace" name="Command Handling - Advanced handles summarise command with only whitespace" time="0.003">
    </testcase>
    <testcase classname="Command Handling - Advanced handles very long text in summarise command" name="Command Handling - Advanced handles very long text in summarise command" time="0.004">
    </testcase>
    <testcase classname="Command Handling - Advanced handles special characters in summarise command" name="Command Handling - Advanced handles special characters in summarise command" time="0.004">
    </testcase>
    <testcase classname="Command Handling - Advanced handles multiline text in summarise command" name="Command Handling - Advanced handles multiline text in summarise command" time="0.002">
    </testcase>
    <testcase classname="Command Handling - Advanced handles command with extra parameters" name="Command Handling - Advanced handles command with extra parameters" time="0.004">
    </testcase>
    <testcase classname="Command Handling - Advanced handles case insensitive commands" name="Command Handling - Advanced handles case insensitive commands" time="0.005">
    </testcase>
    <testcase classname="Command Handling - Advanced handles command with markdown formatting" name="Command Handling - Advanced handles command with markdown formatting" time="0.001">
    </testcase>
    <testcase classname="Command Handling - Advanced handles command with URLs" name="Command Handling - Advanced handles command with URLs" time="0.011">
    </testcase>
    <testcase classname="Command Handling - Advanced handles command with emojis" name="Command Handling - Advanced handles command with emojis" time="0.004">
    </testcase>
  </testsuite>
  <testsuite name="Discord mock" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:33" time="0.969" tests="1">
    <testcase classname="Discord mock Mock is valid" name="Discord mock Mock is valid" time="0.002">
    </testcase>
  </testsuite>
  <testsuite name="Command Handling - Basic" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:23" time="11.322" tests="6">
    <testcase classname="Command Handling - Basic responds to !clearhistory and clears the conversation history" name="Command Handling - Basic responds to !clearhistory and clears the conversation history" time="0.011">
    </testcase>
    <testcase classname="Command Handling - Basic !help command replies with help message" name="Command Handling - Basic !help command replies with help message" time="0.004">
    </testcase>
    <testcase classname="Command Handling - Basic !summary command replies with summary message" name="Command Handling - Basic !summary command replies with summary message" time="0.005">
    </testcase>
    <testcase classname="Command Handling - Basic !stats command replies with stats message" name="Command Handling - Basic !stats command replies with stats message" time="0.011">
    </testcase>
    <testcase classname="Command Handling - Basic handles unknown commands gracefully" name="Command Handling - Basic handles unknown commands gracefully" time="0.004">
    </testcase>
    <testcase classname="Command Handling - Basic ignores messages that do not start with !" name="Command Handling - Basic ignores messages that do not start with !" time="0.004">
    </testcase>
  </testsuite>
  <testsuite name="Message flow" errors="0" failures="0" skipped="0" timestamp="2025-09-24T08:29:34" time="0.985" tests="1">
    <testcase classname="Message flow adds user and assistant messages to conversationHistory" name="Message flow adds user and assistant messages to conversationHistory" time="0.009">
    </testcase>
  </testsuite>
  <testsuite name="EnhancedCache - Statistics" errors="0" failures="5" skipped="0" timestamp="2025-09-24T08:29:35" time="3.381" tests="13">
    <testcase classname="EnhancedCache - Statistics Statistics and Metrics should track hit and miss statistics" name="EnhancedCache - Statistics Statistics and Metrics should track hit and miss statistics" time="0.029">
    </testcase>
    <testcase classname="EnhancedCache - Statistics Statistics and Metrics should track memory usage" name="EnhancedCache - Statistics Statistics and Metrics should track memory usage" time="0.01">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 2
Received: 1
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\enhanced-cache-stats.test.js:46:32)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="EnhancedCache - Statistics Statistics and Metrics should track eviction count" name="EnhancedCache - Statistics Statistics and Metrics should track eviction count" time="0.002">
    </testcase>
    <testcase classname="EnhancedCache - Statistics Statistics and Metrics should provide detailed cache information" name="EnhancedCache - Statistics Statistics and Metrics should provide detailed cache information" time="0.008">
      <failure>Error: expect(received).toHaveLength(expected)

Expected length: 2
Received length: 1
Received array:  [{&quot;accessCount&quot;: 0, &quot;age&quot;: 1, &quot;isExpired&quot;: false, &quot;key&quot;: &quot;key2&quot;, &quot;lastAccessed&quot;: 1758702579012, &quot;size&quot;: 128, &quot;tags&quot;: [], &quot;value&quot;: &quot;value2&quot;}]
    at Object.toHaveLength (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\enhanced-cache-stats.test.js:69:36)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="EnhancedCache - Statistics Error Handling should handle invalid keys gracefully" name="EnhancedCache - Statistics Error Handling should handle invalid keys gracefully" time="0.002">
    </testcase>
    <testcase classname="EnhancedCache - Statistics Error Handling should handle invalid values gracefully" name="EnhancedCache - Statistics Error Handling should handle invalid values gracefully" time="0.001">
    </testcase>
    <testcase classname="EnhancedCache - Statistics Error Handling should handle cache operations during shutdown" name="EnhancedCache - Statistics Error Handling should handle cache operations during shutdown" time="0.001">
    </testcase>
    <testcase classname="EnhancedCache - Statistics Cache Entry should create cache entries with correct properties" name="EnhancedCache - Statistics Cache Entry should create cache entries with correct properties" time="0.003">
      <failure>Error: expect(received).toBeDefined()

Received: undefined
    at Object.toBeDefined (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\enhanced-cache-stats.test.js:100:31)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="EnhancedCache - Statistics Cache Entry should track access count correctly" name="EnhancedCache - Statistics Cache Entry should track access count correctly" time="0.003">
    </testcase>
    <testcase classname="EnhancedCache - Statistics Cache Entry should update last accessed time on get" name="EnhancedCache - Statistics Cache Entry should update last accessed time on get" time="0.001">
    </testcase>
    <testcase classname="EnhancedCache - Statistics Configuration should accept custom configuration" name="EnhancedCache - Statistics Configuration should accept custom configuration" time="0.001">
      <failure>Error: expect(received).toBe(expected) // Object.is equality

Expected: 20
Received: undefined
    at Object.toBe (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\enhanced-cache-stats.test.js:142:49)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="EnhancedCache - Statistics Configuration should use default configuration when none provided" name="EnhancedCache - Statistics Configuration should use default configuration when none provided" time="0.004">
      <failure>Error: expect(received).toBeDefined()

Received: undefined
    at Object.toBeDefined (C:\Users\ch\aszune\aszune-ai-bot\__tests__\unit\enhanced-cache-stats.test.js:150:32)
    at Promise.then.completed (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:298:28)
    at new Promise (&lt;anonymous&gt;)
    at callAsyncCircusFn (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\utils.js:231:10)
    at _callCircusTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:316:40)
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at _runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:252:3)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:126:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at _runTestsForDescribeBlock (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:121:9)
    at run (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\run.js:71:3)
    at runAndTransformResultsToJestFormat (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapterInit.js:122:21)
    at jestAdapter (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-circus\build\legacy-code-todo-rewrite\jestAdapter.js:79:19)
    at runTestInternal (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:367:16)
    at runTest (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\runTest.js:444:34)
    at Object.worker (C:\Users\ch\aszune\aszune-ai-bot\node_modules\jest-runner\build\testWorker.js:106:12)</failure>
    </testcase>
    <testcase classname="EnhancedCache - Statistics Configuration should handle invalid configuration gracefully" name="EnhancedCache - Statistics Configuration should handle invalid configuration gracefully" time="0.003">
    </testcase>
  </testsuite>
</testsuites>